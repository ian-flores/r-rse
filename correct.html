<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 Correctness | Merely Useful: Using R for Research Software Engineering</title>
  <meta name="description" content="Chapter 12 Correctness | Merely Useful: Using R for Research Software Engineering" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 Correctness | Merely Useful: Using R for Research Software Engineering" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 Correctness | Merely Useful: Using R for Research Software Engineering" />
  
  
  

<meta name="author" content="Madeleine Bonsma-Fisher, Kate Hertweck, Damien Irving, Luke Johnston, Christina Koch, Sara Mahallati, Joel Ostblom, Elizabeth Wickes, Charlotte Wickham, and Greg Wilson" />


<meta name="date" content="2020-07-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="package-r.html"/>
<link rel="next" href="publish.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Merely Useful: R-RSE</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#rse-intro-personas"><i class="fa fa-check"></i><b>1.1</b> Who are these lessons for?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#summary"><i class="fa fa-check"></i><b>1.1.1</b> Summary</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.1.2</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#rse-intro-big-picture"><i class="fa fa-check"></i><b>1.2</b> What’s the big picture?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#why-isnt-all-of-this-already-normal"><i class="fa fa-check"></i><b>1.2.1</b> Why isn’t all of this already normal?</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#syllabus"><i class="fa fa-check"></i><b>1.2.2</b> Syllabus</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#rse-intro-ack"><i class="fa fa-check"></i><b>1.3</b> Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="bash-basics.html"><a href="bash-basics.html"><i class="fa fa-check"></i><b>2</b> The Basics of the Unix Shell</a>
<ul>
<li class="chapter" data-level="2.1" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-explore"><i class="fa fa-check"></i><b>2.1</b> How can I explore my files and directories using the shell?</a></li>
<li class="chapter" data-level="2.2" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-navigate"><i class="fa fa-check"></i><b>2.2</b> How can I move around in the shell?</a></li>
<li class="chapter" data-level="2.3" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-filedir"><i class="fa fa-check"></i><b>2.3</b> How can I create new files and directories?</a></li>
<li class="chapter" data-level="2.4" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-move"><i class="fa fa-check"></i><b>2.4</b> How can move files and directories around?</a></li>
<li class="chapter" data-level="2.5" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-copy"><i class="fa fa-check"></i><b>2.5</b> How can I copy files and directories?</a></li>
<li class="chapter" data-level="2.6" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-rm"><i class="fa fa-check"></i><b>2.6</b> How can I delete files and directories?</a></li>
<li class="chapter" data-level="2.7" data-path="bash-basics.html"><a href="bash-basics.html#bash-basicswildcard"><i class="fa fa-check"></i><b>2.7</b> How can I run commands on lots of files at once?</a></li>
<li class="chapter" data-level="2.8" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-help"><i class="fa fa-check"></i><b>2.8</b> How can I find out what commands there are and how to use them?</a></li>
<li class="chapter" data-level="2.9" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-pipe"><i class="fa fa-check"></i><b>2.9</b> How can I combine commands?</a></li>
<li class="chapter" data-level="2.10" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-stdio"><i class="fa fa-check"></i><b>2.10</b> How do pipes work (and why do I need to know)?</a></li>
<li class="chapter" data-level="2.11" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-loops"><i class="fa fa-check"></i><b>2.11</b> How can I do the same operations on many files?</a></li>
<li class="chapter" data-level="2.12" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-meaningless"><i class="fa fa-check"></i><b>2.12</b> What do variable names mean?</a></li>
<li class="chapter" data-level="2.13" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-history"><i class="fa fa-check"></i><b>2.13</b> How can I re-do things I have done recently?</a></li>
<li class="chapter" data-level="2.14" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-autoname"><i class="fa fa-check"></i><b>2.14</b> How can I create new filenames automatically?</a></li>
<li class="chapter" data-level="2.15" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-exercises"><i class="fa fa-check"></i><b>2.15</b> Exercises</a>
<ul>
<li class="chapter" data-level="2.15.1" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-more-ls"><i class="fa fa-check"></i><b>2.15.1</b> Exploring more <code>ls</code> flags</a></li>
<li class="chapter" data-level="2.15.2" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-ls-rt"><i class="fa fa-check"></i><b>2.15.2</b> Listing recursively and by time</a></li>
<li class="chapter" data-level="2.15.3" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-paths"><i class="fa fa-check"></i><b>2.15.3</b> Absolute and relative paths</a></li>
<li class="chapter" data-level="2.15.4" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-resolve-rel-path"><i class="fa fa-check"></i><b>2.15.4</b> Relative path resolution</a></li>
<li class="chapter" data-level="2.15.5" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-reading-ls"><i class="fa fa-check"></i><b>2.15.5</b> <code>ls</code> reading comprehension</a></li>
<li class="chapter" data-level="2.15.6" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-touch"><i class="fa fa-check"></i><b>2.15.6</b> Creating files a different way</a></li>
<li class="chapter" data-level="2.15.7" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-move-dot"><i class="fa fa-check"></i><b>2.15.7</b> Moving to the current folder</a></li>
<li class="chapter" data-level="2.15.8" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-renaming-files"><i class="fa fa-check"></i><b>2.15.8</b> Renaming files</a></li>
<li class="chapter" data-level="2.15.9" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-last-ls"><i class="fa fa-check"></i><b>2.15.9</b> Moving and copying</a></li>
<li class="chapter" data-level="2.15.10" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-safe-rm"><i class="fa fa-check"></i><b>2.15.10</b> Using <code>rm</code> safely</a></li>
<li class="chapter" data-level="2.15.11" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-copy-multi"><i class="fa fa-check"></i><b>2.15.11</b> Copy with multiple filenames</a></li>
<li class="chapter" data-level="2.15.12" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-ls-match"><i class="fa fa-check"></i><b>2.15.12</b> List filenames matching a pattern</a></li>
<li class="chapter" data-level="2.15.13" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-more-wildcards"><i class="fa fa-check"></i><b>2.15.13</b> More on wildcards</a></li>
<li class="chapter" data-level="2.15.14" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-organizing"><i class="fa fa-check"></i><b>2.15.14</b> Organizing directories and files</a></li>
<li class="chapter" data-level="2.15.15" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-reproduce-structure"><i class="fa fa-check"></i><b>2.15.15</b> Reproduce a directory structure</a></li>
<li class="chapter" data-level="2.15.16" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-sort-n"><i class="fa fa-check"></i><b>2.15.16</b> What does <code>sort -n</code> do?</a></li>
<li class="chapter" data-level="2.15.17" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-redirect-append"><i class="fa fa-check"></i><b>2.15.17</b> What does <code>&gt;&gt;</code> mean?</a></li>
<li class="chapter" data-level="2.15.18" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-append-data"><i class="fa fa-check"></i><b>2.15.18</b> Appending data</a></li>
<li class="chapter" data-level="2.15.19" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-piping"><i class="fa fa-check"></i><b>2.15.19</b> Piping commands</a></li>
<li class="chapter" data-level="2.15.20" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-uniq-adjacent"><i class="fa fa-check"></i><b>2.15.20</b> Why does <code>uniq</code> only remove adjacent duplicates?</a></li>
<li class="chapter" data-level="2.15.21" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-reading-pipes"><i class="fa fa-check"></i><b>2.15.21</b> Pipe reading comprehension</a></li>
<li class="chapter" data-level="2.15.22" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-pipe-construction"><i class="fa fa-check"></i><b>2.15.22</b> Pipe construction</a></li>
<li class="chapter" data-level="2.15.23" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-which-pipe"><i class="fa fa-check"></i><b>2.15.23</b> Which pipe?</a></li>
<li class="chapter" data-level="2.15.24" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-wildcard-expressions"><i class="fa fa-check"></i><b>2.15.24</b> Wildcard expressions</a></li>
<li class="chapter" data-level="2.15.25" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-remove-unneeded"><i class="fa fa-check"></i><b>2.15.25</b> Removing unneeded files</a></li>
<li class="chapter" data-level="2.15.26" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-loop-dry-run"><i class="fa fa-check"></i><b>2.15.26</b> Doing a dry run</a></li>
<li class="chapter" data-level="2.15.27" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-nested-loops"><i class="fa fa-check"></i><b>2.15.27</b> Nested loops</a></li>
<li class="chapter" data-level="2.15.28" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-loop-variables"><i class="fa fa-check"></i><b>2.15.28</b> Variables in loops</a></li>
<li class="chapter" data-level="2.15.29" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-limiting-file-sets"><i class="fa fa-check"></i><b>2.15.29</b> Limiting sets of files</a></li>
<li class="chapter" data-level="2.15.30" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-loop-save"><i class="fa fa-check"></i><b>2.15.30</b> Saving to a file in a loop</a></li>
<li class="chapter" data-level="2.15.31" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-list-unique"><i class="fa fa-check"></i><b>2.15.31</b> List unique species</a></li>
<li class="chapter" data-level="2.15.32" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-ex-history-order"><i class="fa fa-check"></i><b>2.15.32</b> Why does <code>history</code> record commands before running them?</a></li>
</ul></li>
<li class="chapter" data-level="2.16" data-path="bash-basics.html"><a href="bash-basics.html#bash-basics-keypoints"><i class="fa fa-check"></i><b>2.16</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="bash-advanced.html"><a href="bash-advanced.html"><i class="fa fa-check"></i><b>3</b> Going Further with the Unix Shell</a>
<ul>
<li class="chapter" data-level="3.1" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-script"><i class="fa fa-check"></i><b>3.1</b> How can I create new commands of my own?</a></li>
<li class="chapter" data-level="3.2" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-params"><i class="fa fa-check"></i><b>3.2</b> How can I make my scripts more versatile?</a></li>
<li class="chapter" data-level="3.3" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-capture"><i class="fa fa-check"></i><b>3.3</b> How can I turn interactive work into a script?</a></li>
<li class="chapter" data-level="3.4" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-grep"><i class="fa fa-check"></i><b>3.4</b> How can I find things in a file?</a></li>
<li class="chapter" data-level="3.5" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-find"><i class="fa fa-check"></i><b>3.5</b> How can I find files?</a></li>
<li class="chapter" data-level="3.6" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-vars"><i class="fa fa-check"></i><b>3.6</b> How can I change the shell’s settings?</a></li>
<li class="chapter" data-level="3.7" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-summary"><i class="fa fa-check"></i><b>3.7</b> Summary</a></li>
<li class="chapter" data-level="3.8" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-exercises"><i class="fa fa-check"></i><b>3.8</b> Exercises</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-script-variables"><i class="fa fa-check"></i><b>3.8.1</b> Variables in shell scripts</a></li>
<li class="chapter" data-level="3.8.2" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-longest-with-extension"><i class="fa fa-check"></i><b>3.8.2</b> Find the longest file with a given extension</a></li>
<li class="chapter" data-level="3.8.3" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-reading-scripts"><i class="fa fa-check"></i><b>3.8.3</b> Script reading comprehension</a></li>
<li class="chapter" data-level="3.8.4" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-using-grep"><i class="fa fa-check"></i><b>3.8.4</b> Using <code>grep</code></a></li>
<li class="chapter" data-level="3.8.5" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-tracking-species"><i class="fa fa-check"></i><b>3.8.5</b> Tracking a species</a></li>
<li class="chapter" data-level="3.8.6" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-little-women"><i class="fa fa-check"></i><b>3.8.6</b> Counting names</a></li>
<li class="chapter" data-level="3.8.7" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-match-subtract"><i class="fa fa-check"></i><b>3.8.7</b> Matching and subtracting</a></li>
<li class="chapter" data-level="3.8.8" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-reading-find"><i class="fa fa-check"></i><b>3.8.8</b> <code>find</code> pipeline reading comprehension</a></li>
<li class="chapter" data-level="3.8.9" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-find-properties"><i class="fa fa-check"></i><b>3.8.9</b> Finding files with different properties</a></li>
<li class="chapter" data-level="3.8.10" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-combining-options"><i class="fa fa-check"></i><b>3.8.10</b> Combining options</a></li>
<li class="chapter" data-level="3.8.11" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-ex-other-wildcards"><i class="fa fa-check"></i><b>3.8.11</b> Other wildcards</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="bash-advanced.html"><a href="bash-advanced.html#bash-advanced-keypoints"><i class="fa fa-check"></i><b>3.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="git-cmdline.html"><a href="git-cmdline.html"><i class="fa fa-check"></i><b>4</b> Git at the Command Line</a>
<ul>
<li class="chapter" data-level="4.1" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-setup"><i class="fa fa-check"></i><b>4.1</b> How can I set up Git for command-line use?</a></li>
<li class="chapter" data-level="4.2" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-repos"><i class="fa fa-check"></i><b>4.2</b> How can I create a new repository?</a></li>
<li class="chapter" data-level="4.3" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-changes"><i class="fa fa-check"></i><b>4.3</b> How can I save and track changes?</a></li>
<li class="chapter" data-level="4.4" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-remotes"><i class="fa fa-check"></i><b>4.4</b> How can I synchronize with other repositories?</a></li>
<li class="chapter" data-level="4.5" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-history"><i class="fa fa-check"></i><b>4.5</b> How can I explore a project’s history?</a></li>
<li class="chapter" data-level="4.6" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-restore"><i class="fa fa-check"></i><b>4.6</b> How can I restore old versions of files?</a></li>
<li class="chapter" data-level="4.7" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ignore"><i class="fa fa-check"></i><b>4.7</b> How can I tell Git to ignore some files?</a></li>
<li class="chapter" data-level="4.8" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-exercises"><i class="fa fa-check"></i><b>4.8</b> Exercises</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-places"><i class="fa fa-check"></i><b>4.8.1</b> Places to create Git repositories</a></li>
<li class="chapter" data-level="4.8.2" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-commit"><i class="fa fa-check"></i><b>4.8.2</b> Committing changes</a></li>
<li class="chapter" data-level="4.8.3" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-multiple"><i class="fa fa-check"></i><b>4.8.3</b> Committing multiple files</a></li>
<li class="chapter" data-level="4.8.4" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-bio"><i class="fa fa-check"></i><b>4.8.4</b> Write a biography</a></li>
<li class="chapter" data-level="4.8.5" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-ignore-nested"><i class="fa fa-check"></i><b>4.8.5</b> Ignoring nested files</a></li>
<li class="chapter" data-level="4.8.6" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-include"><i class="fa fa-check"></i><b>4.8.6</b> Including specific files</a></li>
<li class="chapter" data-level="4.8.7" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-github-interface"><i class="fa fa-check"></i><b>4.8.7</b> Exploring the GitHub interface</a></li>
<li class="chapter" data-level="4.8.8" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-timestamp"><i class="fa fa-check"></i><b>4.8.8</b> GitHub timestamps</a></li>
<li class="chapter" data-level="4.8.9" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-push-commit"><i class="fa fa-check"></i><b>4.8.9</b> Push versus commit</a></li>
<li class="chapter" data-level="4.8.10" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-boilerplate"><i class="fa fa-check"></i><b>4.8.10</b> License and README files</a></li>
<li class="chapter" data-level="4.8.11" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-recover"><i class="fa fa-check"></i><b>4.8.11</b> Recovering older versions of a file</a></li>
<li class="chapter" data-level="4.8.12" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-history"><i class="fa fa-check"></i><b>4.8.12</b> Workflow and history</a></li>
<li class="chapter" data-level="4.8.13" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-diff"><i class="fa fa-check"></i><b>4.8.13</b> Understanding <code>git diff</code></a></li>
<li class="chapter" data-level="4.8.14" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-unstage"><i class="fa fa-check"></i><b>4.8.14</b> Getting rid of staged changes</a></li>
<li class="chapter" data-level="4.8.15" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-ex-blame"><i class="fa fa-check"></i><b>4.8.15</b> Figuring out who did what</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="git-cmdline.html"><a href="git-cmdline.html#git-cmdline-keypoints"><i class="fa fa-check"></i><b>4.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="git-advanced.html"><a href="git-advanced.html"><i class="fa fa-check"></i><b>5</b> Advanced Git</a>
<ul>
<li class="chapter" data-level="5.1" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-create-branch"><i class="fa fa-check"></i><b>5.1</b> What is a branch and how do I create one?</a></li>
<li class="chapter" data-level="5.2" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-merge"><i class="fa fa-check"></i><b>5.2</b> How do I merge work from separate branches?</a></li>
<li class="chapter" data-level="5.3" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-conflict"><i class="fa fa-check"></i><b>5.3</b> How do I handle conflicting changes?</a></li>
<li class="chapter" data-level="5.4" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-workflow"><i class="fa fa-check"></i><b>5.4</b> How should I use branches?</a></li>
<li class="chapter" data-level="5.5" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-fork"><i class="fa fa-check"></i><b>5.5</b> How can I use someone else’s work?</a></li>
<li class="chapter" data-level="5.6" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-pull-requests"><i class="fa fa-check"></i><b>5.6</b> What is a pull request and how do I create one?</a></li>
<li class="chapter" data-level="5.7" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-tag"><i class="fa fa-check"></i><b>5.7</b> How can I label a particular version of my project?</a></li>
<li class="chapter" data-level="5.8" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-exercises"><i class="fa fa-check"></i><b>5.8</b> Exercises</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-ex-additional-pr"><i class="fa fa-check"></i><b>5.8.1</b> Add new country file and make additional PR</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="git-advanced.html"><a href="git-advanced.html#git-advanced-keypoints"><i class="fa fa-check"></i><b>5.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="style.html"><a href="style.html"><i class="fa fa-check"></i><b>6</b> Code Style, Review, and Refactoring</a>
<ul>
<li class="chapter" data-level="6.1" data-path="style.html"><a href="style.html#style-review"><i class="fa fa-check"></i><b>6.1</b> How should I review someone else’s code?</a></li>
<li class="chapter" data-level="6.2" data-path="style.html"><a href="style.html#style-check"><i class="fa fa-check"></i><b>6.2</b> How can I check that code follows style guidelines?</a></li>
<li class="chapter" data-level="6.3" data-path="style.html"><a href="style.html#style-how"><i class="fa fa-check"></i><b>6.3</b> How should I collaborate with people when doing code reviews?</a></li>
<li class="chapter" data-level="6.4" data-path="style.html"><a href="style.html#style-order"><i class="fa fa-check"></i><b>6.4</b> In what order should functions be defined?</a></li>
<li class="chapter" data-level="6.5" data-path="style.html"><a href="style.html#style-refactor"><i class="fa fa-check"></i><b>6.5</b> What should I look for when reviewing code?</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="style.html"><a href="style.html#do-not-repeat-values"><i class="fa fa-check"></i><b>6.5.1</b> Do not repeat values</a></li>
<li class="chapter" data-level="6.5.2" data-path="style.html"><a href="style.html#do-not-repeat-calculations-in-loops"><i class="fa fa-check"></i><b>6.5.2</b> Do not repeat calculations in loops</a></li>
<li class="chapter" data-level="6.5.3" data-path="style.html"><a href="style.html#replace-tests-with-flags-to-clarify-repeated-tests"><i class="fa fa-check"></i><b>6.5.3</b> Replace tests with flags to clarify repeated tests</a></li>
<li class="chapter" data-level="6.5.4" data-path="style.html"><a href="style.html#handle-special-cases-first"><i class="fa fa-check"></i><b>6.5.4</b> Handle special cases first</a></li>
<li class="chapter" data-level="6.5.5" data-path="style.html"><a href="style.html#use-functions-to-make-code-more-comprehensible"><i class="fa fa-check"></i><b>6.5.5</b> Use functions to make code more comprehensible</a></li>
<li class="chapter" data-level="6.5.6" data-path="style.html"><a href="style.html#combine-operations-in-functions"><i class="fa fa-check"></i><b>6.5.6</b> Combine operations in functions</a></li>
<li class="chapter" data-level="6.5.7" data-path="style.html"><a href="style.html#replace-code-with-data"><i class="fa fa-check"></i><b>6.5.7</b> Replace code with data</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="style.html"><a href="style.html#style-summary"><i class="fa fa-check"></i><b>6.6</b> Summary</a></li>
<li class="chapter" data-level="6.7" data-path="style.html"><a href="style.html#style-exercises"><i class="fa fa-check"></i><b>6.7</b> Exercises</a></li>
<li class="chapter" data-level="6.8" data-path="style.html"><a href="style.html#style-keypoints"><i class="fa fa-check"></i><b>6.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="automate.html"><a href="automate.html"><i class="fa fa-check"></i><b>7</b> Automating Analyses</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="automate.html"><a href="automate.html#setting-up"><i class="fa fa-check"></i><b>7.0.1</b> Setting Up</a></li>
<li class="chapter" data-level="7.0.2" data-path="automate.html"><a href="automate.html#acknowledgements"><i class="fa fa-check"></i><b>7.0.2</b> Acknowledgements</a></li>
<li class="chapter" data-level="7.1" data-path="automate.html"><a href="automate.html#automate-single-file"><i class="fa fa-check"></i><b>7.1</b> How can I update a single file using Make?</a></li>
<li class="chapter" data-level="7.2" data-path="automate.html"><a href="automate.html#automate-multiple"><i class="fa fa-check"></i><b>7.2</b> How can I manage multiple files?</a></li>
<li class="chapter" data-level="7.3" data-path="automate.html"><a href="automate.html#automate-phony"><i class="fa fa-check"></i><b>7.3</b> How can I update several files at once?</a></li>
<li class="chapter" data-level="7.4" data-path="automate.html"><a href="automate.html#automate-depend-programs"><i class="fa fa-check"></i><b>7.4</b> How can I update files when programs change?</a></li>
<li class="chapter" data-level="7.5" data-path="automate.html"><a href="automate.html#automate-variables"><i class="fa fa-check"></i><b>7.5</b> How can I reduce repetition in a Makefile?</a></li>
<li class="chapter" data-level="7.6" data-path="automate.html"><a href="automate.html#automate-autovar"><i class="fa fa-check"></i><b>7.6</b> How can I take specific filenames out of my rules?</a></li>
<li class="chapter" data-level="7.7" data-path="automate.html"><a href="automate.html#automate-pattern"><i class="fa fa-check"></i><b>7.7</b> How can I write a generic rule to update many files?</a></li>
<li class="chapter" data-level="7.8" data-path="automate.html"><a href="automate.html#automate-functions"><i class="fa fa-check"></i><b>7.8</b> How can I automatically define a set of files?</a></li>
<li class="chapter" data-level="7.9" data-path="automate.html"><a href="automate.html#automate-doc"><i class="fa fa-check"></i><b>7.9</b> How can I document my Makefile?</a></li>
<li class="chapter" data-level="7.10" data-path="automate.html"><a href="automate.html#automate-pipeline"><i class="fa fa-check"></i><b>7.10</b> How can I create entire analysis pipelines?</a></li>
<li class="chapter" data-level="7.11" data-path="automate.html"><a href="automate.html#automate-summary"><i class="fa fa-check"></i><b>7.11</b> Summary</a></li>
<li class="chapter" data-level="7.12" data-path="automate.html"><a href="automate.html#automate-exercises"><i class="fa fa-check"></i><b>7.12</b> Exercises</a>
<ul>
<li class="chapter" data-level="7.12.1" data-path="automate.html"><a href="automate.html#automate-ex-create-summary-results"><i class="fa fa-check"></i><b>7.12.1</b> Create a summary results file</a></li>
<li class="chapter" data-level="7.12.2" data-path="automate.html"><a href="automate.html#automate-ex-plot-top-n"><i class="fa fa-check"></i><b>7.12.2</b> Generate a plot for the top N words</a></li>
<li class="chapter" data-level="7.12.3" data-path="automate.html"><a href="automate.html#automate-ex-mkdir"><i class="fa fa-check"></i><b>7.12.3</b> Make sure the output directory exists</a></li>
<li class="chapter" data-level="7.12.4" data-path="automate.html"><a href="automate.html#automate-ex-report-change"><i class="fa fa-check"></i><b>7.12.4</b> Report results that would change</a></li>
<li class="chapter" data-level="7.12.5" data-path="automate.html"><a href="automate.html#automate-ex-readable-help"><i class="fa fa-check"></i><b>7.12.5</b> Create more readable help</a></li>
<li class="chapter" data-level="7.12.6" data-path="automate.html"><a href="automate.html#automate-ex-wildcard-perils"><i class="fa fa-check"></i><b>7.12.6</b> The perils of shell wildcards</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="teams.html"><a href="teams.html"><i class="fa fa-check"></i><b>8</b> Working in Teams</a>
<ul>
<li class="chapter" data-level="8.1" data-path="teams.html"><a href="teams.html#teams-inclusive"><i class="fa fa-check"></i><b>8.1</b> Why is it important to ensure everyone feels welcome to contribute?</a></li>
<li class="chapter" data-level="8.2" data-path="teams.html"><a href="teams.html#teams-coc"><i class="fa fa-check"></i><b>8.2</b> Why should we establish a code of conduct for a project?</a></li>
<li class="chapter" data-level="8.3" data-path="teams.html"><a href="teams.html#teams-license"><i class="fa fa-check"></i><b>8.3</b> Why should we include a license?</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="teams.html"><a href="teams.html#teams-license-software"><i class="fa fa-check"></i><b>8.3.1</b> How should we license our software?</a></li>
<li class="chapter" data-level="8.3.2" data-path="teams.html"><a href="teams.html#teams-license-other"><i class="fa fa-check"></i><b>8.3.2</b> How should we license our data and reports?</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="teams.html"><a href="teams.html#teams-planning"><i class="fa fa-check"></i><b>8.4</b> How can we keep track of the work we still have to do?</a></li>
<li class="chapter" data-level="8.5" data-path="teams.html"><a href="teams.html#teams-bugs"><i class="fa fa-check"></i><b>8.5</b> How can I write good bug reports?</a></li>
<li class="chapter" data-level="8.6" data-path="teams.html"><a href="teams.html#teams-labels"><i class="fa fa-check"></i><b>8.6</b> How can we use labels to organize work?</a></li>
<li class="chapter" data-level="8.7" data-path="teams.html"><a href="teams.html#teams-prioritize"><i class="fa fa-check"></i><b>8.7</b> How do we decide the priority of certain tasks?</a></li>
<li class="chapter" data-level="8.8" data-path="teams.html"><a href="teams.html#teams-workflow"><i class="fa fa-check"></i><b>8.8</b> How do we standardize a workflow for the project?</a></li>
<li class="chapter" data-level="8.9" data-path="teams.html"><a href="teams.html#teams-martha"><i class="fa fa-check"></i><b>8.9</b> How can we make decisions as a group?</a></li>
<li class="chapter" data-level="8.10" data-path="teams.html"><a href="teams.html#teams-meetings"><i class="fa fa-check"></i><b>8.10</b> How can we run meetings more efficiently?</a></li>
<li class="chapter" data-level="8.11" data-path="teams.html"><a href="teams.html#teams-fair"><i class="fa fa-check"></i><b>8.11</b> How can we keep people from talking too much or too little?</a></li>
<li class="chapter" data-level="8.12" data-path="teams.html"><a href="teams.html#teams-online"><i class="fa fa-check"></i><b>8.12</b> How should we run online meetings?</a></li>
<li class="chapter" data-level="8.13" data-path="teams.html"><a href="teams.html#teams-conflict"><i class="fa fa-check"></i><b>8.13</b> How should we handle conflict within the team?</a></li>
<li class="chapter" data-level="8.14" data-path="teams.html"><a href="teams.html#teams-conflict-inclusive"><i class="fa fa-check"></i><b>8.14</b> How can we handle conflict to support an inclusive culture?</a></li>
<li class="chapter" data-level="8.15" data-path="teams.html"><a href="teams.html#teams-summary"><i class="fa fa-check"></i><b>8.15</b> Summary</a></li>
<li class="chapter" data-level="8.16" data-path="teams.html"><a href="teams.html#teams-exercises"><i class="fa fa-check"></i><b>8.16</b> Exercises</a>
<ul>
<li class="chapter" data-level="8.16.1" data-path="teams.html"><a href="teams.html#teams-ex-scavenger-hunt"><i class="fa fa-check"></i><b>8.16.1</b> ggplot2 contributing scavenger hunt</a></li>
<li class="chapter" data-level="8.16.2" data-path="teams.html"><a href="teams.html#teams-ex-priority-conflict"><i class="fa fa-check"></i><b>8.16.2</b> Responding to conflict about project priorities</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="project.html"><a href="project.html"><i class="fa fa-check"></i><b>9</b> Project Structure</a>
<ul>
<li class="chapter" data-level="9.1" data-path="project.html"><a href="project.html#project-thinking"><i class="fa fa-check"></i><b>9.1</b> What is a project?</a></li>
<li class="chapter" data-level="9.2" data-path="project.html"><a href="project.html#project-boilerplate"><i class="fa fa-check"></i><b>9.2</b> What files should every project contain?</a></li>
<li class="chapter" data-level="9.3" data-path="project.html"><a href="project.html#project-organize"><i class="fa fa-check"></i><b>9.3</b> How should I structure the rest of my project?</a></li>
<li class="chapter" data-level="9.4" data-path="project.html"><a href="project.html#project-scripts"><i class="fa fa-check"></i><b>9.4</b> How should I manage a mix of compiled programs and scripts?</a></li>
<li class="chapter" data-level="9.5" data-path="project.html"><a href="project.html#project-software-docs"><i class="fa fa-check"></i><b>9.5</b> How should I document the software in a project?</a></li>
<li class="chapter" data-level="9.6" data-path="project.html"><a href="project.html#project-infer"><i class="fa fa-check"></i><b>9.6</b> What should I document?</a></li>
<li class="chapter" data-level="9.7" data-path="project.html"><a href="project.html#project-faq"><i class="fa fa-check"></i><b>9.7</b> How can I create a useful FAQ?</a></li>
<li class="chapter" data-level="9.8" data-path="project.html"><a href="project.html#project-data-vs-code"><i class="fa fa-check"></i><b>9.8</b> How does documentation for data differ from documentation for code?</a></li>
<li class="chapter" data-level="9.9" data-path="project.html"><a href="project.html#project-data-docs"><i class="fa fa-check"></i><b>9.9</b> How should I document the data in a project?</a></li>
<li class="chapter" data-level="9.10" data-path="project.html"><a href="project.html#project-data-start"><i class="fa fa-check"></i><b>9.10</b> How can I get started documenting my data?</a></li>
<li class="chapter" data-level="9.11" data-path="project.html"><a href="project.html#project-data-first"><i class="fa fa-check"></i><b>9.11</b> What data documentation should I create first?</a></li>
<li class="chapter" data-level="9.12" data-path="project.html"><a href="project.html#project-external"><i class="fa fa-check"></i><b>9.12</b> How should I manage data that can’t be stored in version control?</a></li>
<li class="chapter" data-level="9.13" data-path="project.html"><a href="project.html#project-summary"><i class="fa fa-check"></i><b>9.13</b> Summary</a></li>
<li class="chapter" data-level="9.14" data-path="project.html"><a href="project.html#exercises"><i class="fa fa-check"></i><b>9.14</b> Exercises</a>
<ul>
<li class="chapter" data-level="9.14.1" data-path="project.html"><a href="project.html#project-ex-understand-project"><i class="fa fa-check"></i><b>9.14.1</b> Understand a project</a></li>
<li class="chapter" data-level="9.14.2" data-path="project.html"><a href="project.html#project-ex-audience"><i class="fa fa-check"></i><b>9.14.2</b> Determining the audience for documentation</a></li>
<li class="chapter" data-level="9.14.3" data-path="project.html"><a href="project.html#project-ex-create-doc-template"><i class="fa fa-check"></i><b>9.14.3</b> Creating documentation template</a></li>
<li class="chapter" data-level="9.14.4" data-path="project.html"><a href="project.html#project-ex-permanent-links"><i class="fa fa-check"></i><b>9.14.4</b> Making permanent links</a></li>
</ul></li>
<li class="chapter" data-level="9.15" data-path="project.html"><a href="project.html#project-keypoints"><i class="fa fa-check"></i><b>9.15</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ci.html"><a href="ci.html"><i class="fa fa-check"></i><b>10</b> Continuous Integration</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ci.html"><a href="ci.html#ci-basic"><i class="fa fa-check"></i><b>10.1</b> How do I set up continuous integration?</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="ci.html"><a href="ci.html#watching-a-repository"><i class="fa fa-check"></i><b>10.1.1</b> Watching a repository</a></li>
<li class="chapter" data-level="10.1.2" data-path="ci.html"><a href="ci.html#setting-up-a-repo"><i class="fa fa-check"></i><b>10.1.2</b> Setting up a repo</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="ci.html"><a href="ci.html#ci-display-github"><i class="fa fa-check"></i><b>10.2</b> How can I display my project’s status on GitHub?</a></li>
<li class="chapter" data-level="10.3" data-path="ci.html"><a href="ci.html#ci-setting-up-with-r"><i class="fa fa-check"></i><b>10.3</b> How can I set up Travis CI for an R project?</a></li>
<li class="chapter" data-level="10.4" data-path="ci.html"><a href="ci.html#ci-testing"><i class="fa fa-check"></i><b>10.4</b> How can I use Travis CI to test my project?</a></li>
<li class="chapter" data-level="10.5" data-path="ci.html"><a href="ci.html#ci-deploying"><i class="fa fa-check"></i><b>10.5</b> How can I use CI for other purposes?</a></li>
<li class="chapter" data-level="10.6" data-path="ci.html"><a href="ci.html#ci-summary"><i class="fa fa-check"></i><b>10.6</b> Summary</a></li>
<li class="chapter" data-level="10.7" data-path="ci.html"><a href="ci.html#ci-exercises"><i class="fa fa-check"></i><b>10.7</b> Exercises</a></li>
<li class="chapter" data-level="10.8" data-path="ci.html"><a href="ci.html#ci-keypoints"><i class="fa fa-check"></i><b>10.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="package-r.html"><a href="package-r.html"><i class="fa fa-check"></i><b>11</b> R Packaging</a>
<ul>
<li class="chapter" data-level="11.1" data-path="package-r.html"><a href="package-r.html#package-r-intro"><i class="fa fa-check"></i><b>11.1</b> What’s in an R package?</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="package-r.html"><a href="package-r.html#exercise-what-packages-do-you-have"><i class="fa fa-check"></i><b>11.1.1</b> Exercise: What packages do you have?</a></li>
<li class="chapter" data-level="11.1.2" data-path="package-r.html"><a href="package-r.html#exercise-can-you-build-a-package"><i class="fa fa-check"></i><b>11.1.2</b> Exercise: Can you build a package?</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="package-r.html"><a href="package-r.html#package-r-background"><i class="fa fa-check"></i><b>11.2</b> What <em>is</em> a package, exactly?</a></li>
<li class="chapter" data-level="11.3" data-path="package-r.html"><a href="package-r.html#package-r-create"><i class="fa fa-check"></i><b>11.3</b> How do I create a package?</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="package-r.html"><a href="package-r.html#exercise-packaging-the-co2-functions"><i class="fa fa-check"></i><b>11.3.1</b> Exercise: Packaging the CO2 functions</a></li>
<li class="chapter" data-level="11.3.2" data-path="package-r.html"><a href="package-r.html#exercise-exploring-a-package"><i class="fa fa-check"></i><b>11.3.2</b> Exercise: Exploring a package</a></li>
<li class="chapter" data-level="11.3.3" data-path="package-r.html"><a href="package-r.html#exercise-ignoring-files"><i class="fa fa-check"></i><b>11.3.3</b> Exercise: Ignoring Files</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="package-r.html"><a href="package-r.html#package-r-use"><i class="fa fa-check"></i><b>11.4</b> How do I use a package while I’m creating it?</a></li>
<li class="chapter" data-level="11.5" data-path="package-r.html"><a href="package-r.html#package-r-document"><i class="fa fa-check"></i><b>11.5</b> How do I document a R package?</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="package-r.html"><a href="package-r.html#exercise-document-a-function"><i class="fa fa-check"></i><b>11.5.1</b> Exercise: Document a function</a></li>
<li class="chapter" data-level="11.5.2" data-path="package-r.html"><a href="package-r.html#exercise-use-markdown-documentation"><i class="fa fa-check"></i><b>11.5.2</b> Exercise: Use Markdown documentation</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="package-r.html"><a href="package-r.html#package-r-docwhat"><i class="fa fa-check"></i><b>11.6</b> What should I document?</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="package-r.html"><a href="package-r.html#exercise-fixing-documentation"><i class="fa fa-check"></i><b>11.6.1</b> Exercise: Fixing documentation</a></li>
<li class="chapter" data-level="11.6.2" data-path="package-r.html"><a href="package-r.html#exercise-cross-references"><i class="fa fa-check"></i><b>11.6.2</b> Exercise: Cross-references</a></li>
<li class="chapter" data-level="11.6.3" data-path="package-r.html"><a href="package-r.html#exercise-documenting-error-conditions"><i class="fa fa-check"></i><b>11.6.3</b> Exercise: Documenting error conditions</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="package-r.html"><a href="package-r.html#package-r-dependencies"><i class="fa fa-check"></i><b>11.7</b> How do I manage package dependencies?</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="package-r.html"><a href="package-r.html#exercise-document-dependencies"><i class="fa fa-check"></i><b>11.7.1</b> Exercise: Document dependencies</a></li>
<li class="chapter" data-level="11.7.2" data-path="package-r.html"><a href="package-r.html#importing"><i class="fa fa-check"></i><b>11.7.2</b> Importing</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="package-r.html"><a href="package-r.html#package-r-github"><i class="fa fa-check"></i><b>11.8</b> How can I share my package via GitHub?</a></li>
<li class="chapter" data-level="11.9" data-path="package-r.html"><a href="package-r.html#package-r-data"><i class="fa fa-check"></i><b>11.9</b> How can I add data to a package?</a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="package-r.html"><a href="package-r.html#exercise-letting-usethis-do-even-more-work"><i class="fa fa-check"></i><b>11.9.1</b> Exercise: Letting <code>usethis</code> do even more work</a></li>
<li class="chapter" data-level="11.9.2" data-path="package-r.html"><a href="package-r.html#exercise-scripting-data-creation"><i class="fa fa-check"></i><b>11.9.2</b> Exercise: Scripting data creation</a></li>
<li class="chapter" data-level="11.9.3" data-path="package-r.html"><a href="package-r.html#exercise-add-sample-data-to-the-co2-package"><i class="fa fa-check"></i><b>11.9.3</b> Exercise: Add sample data to the CO2 package</a></li>
<li class="chapter" data-level="11.9.4" data-path="package-r.html"><a href="package-r.html#exercise-reproducible-data-set-creation"><i class="fa fa-check"></i><b>11.9.4</b> Exercise: Reproducible data set creation</a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="package-r.html"><a href="package-r.html#package-r-summary"><i class="fa fa-check"></i><b>11.10</b> Summary</a></li>
<li class="chapter" data-level="11.11" data-path="package-r.html"><a href="package-r.html#package-r-keypoints"><i class="fa fa-check"></i><b>11.11</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="correct.html"><a href="correct.html"><i class="fa fa-check"></i><b>12</b> Correctness</a>
<ul>
<li class="chapter" data-level="12.1" data-path="correct.html"><a href="correct.html#correct-manual"><i class="fa fa-check"></i><b>12.1</b> How can I test functions manually?</a></li>
<li class="chapter" data-level="12.2" data-path="correct.html"><a href="correct.html#correct-features"><i class="fa fa-check"></i><b>12.2</b> What features do we want a testing framework to have?</a></li>
<li class="chapter" data-level="12.3" data-path="correct.html"><a href="correct.html#correct-create-r"><i class="fa fa-check"></i><b>12.3</b> Create and run unit tests</a></li>
<li class="chapter" data-level="12.4" data-path="correct.html"><a href="correct.html#correct-setup"><i class="fa fa-check"></i><b>12.4</b> How should I set up my unit tests?</a></li>
<li class="chapter" data-level="12.5" data-path="correct.html"><a href="correct.html#correct-check"><i class="fa fa-check"></i><b>12.5</b> How should I check the results of tests?</a></li>
<li class="chapter" data-level="12.6" data-path="correct.html"><a href="correct.html#correct-failure"><i class="fa fa-check"></i><b>12.6</b> Why and how should I test that software fails correctly?</a></li>
<li class="chapter" data-level="12.7" data-path="correct.html"><a href="correct.html#correct-coverage"><i class="fa fa-check"></i><b>12.7</b> How can I tell whether my code has been tested or not?</a></li>
<li class="chapter" data-level="12.8" data-path="correct.html"><a href="correct.html#correct-enough"><i class="fa fa-check"></i><b>12.8</b> How much testing is enough?</a></li>
<li class="chapter" data-level="12.9" data-path="correct.html"><a href="correct.html#correct-tdd"><i class="fa fa-check"></i><b>12.9</b> When should I write my tests?</a></li>
<li class="chapter" data-level="12.10" data-path="correct.html"><a href="correct.html#correct-numeric"><i class="fa fa-check"></i><b>12.10</b> How should I write tests that involved floating-point values?</a></li>
<li class="chapter" data-level="12.11" data-path="correct.html"><a href="correct.html#correct-plots"><i class="fa fa-check"></i><b>12.11</b> How can I test plots and other graphical results?</a></li>
<li class="chapter" data-level="12.12" data-path="correct.html"><a href="correct.html#correct-data"><i class="fa fa-check"></i><b>12.12</b> What data should I use to test my analyses?</a></li>
<li class="chapter" data-level="12.13" data-path="correct.html"><a href="correct.html#correct-random"><i class="fa fa-check"></i><b>12.13</b> How can I test a program that uses random numbers?</a></li>
<li class="chapter" data-level="12.14" data-path="correct.html"><a href="correct.html#correct-production"><i class="fa fa-check"></i><b>12.14</b> How can I test a data analysis pipeline in production?</a></li>
<li class="chapter" data-level="12.15" data-path="correct.html"><a href="correct.html#correct-infer"><i class="fa fa-check"></i><b>12.15</b> How can I infer and check properties of my data?</a></li>
<li class="chapter" data-level="12.16" data-path="correct.html"><a href="correct.html#correct-summary"><i class="fa fa-check"></i><b>12.16</b> Summary</a></li>
<li class="chapter" data-level="12.17" data-path="correct.html"><a href="correct.html#correct-exercises"><i class="fa fa-check"></i><b>12.17</b> Exercises</a>
<ul>
<li class="chapter" data-level="12.17.1" data-path="correct.html"><a href="correct.html#correct-ex-numsign"><i class="fa fa-check"></i><b>12.17.1</b> Fixing <code>numSign</code></a></li>
<li class="chapter" data-level="12.17.2" data-path="correct.html"><a href="correct.html#correct-ex-simple-calc"><i class="fa fa-check"></i><b>12.17.2</b> Checking simple calculations</a></li>
<li class="chapter" data-level="12.17.3" data-path="correct.html"><a href="correct.html#correct-ex-purpose"><i class="fa fa-check"></i><b>12.17.3</b> Explain the purpose of tests</a></li>
<li class="chapter" data-level="12.17.4" data-path="correct.html"><a href="correct.html#correct-ex-count-words"><i class="fa fa-check"></i><b>12.17.4</b> Testing <code>count_words</code></a></li>
<li class="chapter" data-level="12.17.5" data-path="correct.html"><a href="correct.html#correct-ex-check-errors"><i class="fa fa-check"></i><b>12.17.5</b> Checking for errors</a></li>
</ul></li>
<li class="chapter" data-level="12.18" data-path="correct.html"><a href="correct.html#correct-keypoints"><i class="fa fa-check"></i><b>12.18</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="publish.html"><a href="publish.html"><i class="fa fa-check"></i><b>13</b> Publishing</a>
<ul>
<li class="chapter" data-level="13.1" data-path="publish.html"><a href="publish.html#publish-identifiers"><i class="fa fa-check"></i><b>13.1</b> How are reports and authors identified?</a></li>
<li class="chapter" data-level="13.2" data-path="publish.html"><a href="publish.html#publish-where"><i class="fa fa-check"></i><b>13.2</b> Where should I publish my reports?</a></li>
<li class="chapter" data-level="13.3" data-path="publish.html"><a href="publish.html#publish-data"><i class="fa fa-check"></i><b>13.3</b> How should I publish data?</a></li>
<li class="chapter" data-level="13.4" data-path="publish.html"><a href="publish.html#publish-fair"><i class="fa fa-check"></i><b>13.4</b> What standards of data sharing should I aspire to?</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="publish.html"><a href="publish.html#data-should-be-findable."><i class="fa fa-check"></i><b>13.4.1</b> Data should be <em>findable</em>.</a></li>
<li class="chapter" data-level="13.4.2" data-path="publish.html"><a href="publish.html#data-should-be-accessible."><i class="fa fa-check"></i><b>13.4.2</b> Data should be <em>accessible</em>.</a></li>
<li class="chapter" data-level="13.4.3" data-path="publish.html"><a href="publish.html#data-should-be-interoperable."><i class="fa fa-check"></i><b>13.4.3</b> Data should be <em>interoperable</em>.</a></li>
<li class="chapter" data-level="13.4.4" data-path="publish.html"><a href="publish.html#data-should-be-reusable."><i class="fa fa-check"></i><b>13.4.4</b> Data should be <em>reusable</em>.</a></li>
<li class="chapter" data-level="13.4.5" data-path="publish.html"><a href="publish.html#how-and-where-do-i-publish-the-data"><i class="fa fa-check"></i><b>13.4.5</b> How and where do I publish the data?</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="publish.html"><a href="publish.html#publish-software"><i class="fa fa-check"></i><b>13.5</b> How should I publish my software packages?</a></li>
<li class="chapter" data-level="13.6" data-path="publish.html"><a href="publish.html#publish-scripts"><i class="fa fa-check"></i><b>13.6</b> How should I publish my other software?</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="publish.html"><a href="publish.html#software-description"><i class="fa fa-check"></i><b>13.6.1</b> Software description</a></li>
<li class="chapter" data-level="13.6.2" data-path="publish.html"><a href="publish.html#analysis-scripts"><i class="fa fa-check"></i><b>13.6.2</b> Analysis scripts</a></li>
<li class="chapter" data-level="13.6.3" data-path="publish.html"><a href="publish.html#data-processing-steps"><i class="fa fa-check"></i><b>13.6.3</b> Data processing steps</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="publish.html"><a href="publish.html#publish-summary"><i class="fa fa-check"></i><b>13.7</b> Summary</a></li>
<li class="chapter" data-level="13.8" data-path="publish.html"><a href="publish.html#publish-exercises"><i class="fa fa-check"></i><b>13.8</b> Exercises</a>
<ul>
<li class="chapter" data-level="13.8.1" data-path="publish.html"><a href="publish.html#publish-ex-get-orcid"><i class="fa fa-check"></i><b>13.8.1</b> ORCID</a></li>
<li class="chapter" data-level="13.8.2" data-path="publish.html"><a href="publish.html#publish-ex-fair-test"><i class="fa fa-check"></i><b>13.8.2</b> A FAIR test</a></li>
<li class="chapter" data-level="13.8.3" data-path="publish.html"><a href="publish.html#publishing-your-code"><i class="fa fa-check"></i><b>13.8.3</b> Publishing your code</a></li>
</ul></li>
<li class="chapter" data-level="13.9" data-path="publish.html"><a href="publish.html#publish-keypoints"><i class="fa fa-check"></i><b>13.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="finale.html"><a href="finale.html"><i class="fa fa-check"></i><b>14</b> Finale</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i><b>A</b> License</a></li>
<li class="chapter" data-level="B" data-path="conduct.html"><a href="conduct.html"><i class="fa fa-check"></i><b>B</b> Code of Conduct</a>
<ul>
<li class="chapter" data-level="B.1" data-path="conduct.html"><a href="conduct.html#conduct-standards"><i class="fa fa-check"></i><b>B.1</b> Our Standards</a></li>
<li class="chapter" data-level="B.2" data-path="conduct.html"><a href="conduct.html#conduct-responsibilities"><i class="fa fa-check"></i><b>B.2</b> Our Responsibilities</a></li>
<li class="chapter" data-level="B.3" data-path="conduct.html"><a href="conduct.html#conduct-scope"><i class="fa fa-check"></i><b>B.3</b> Scope</a></li>
<li class="chapter" data-level="B.4" data-path="conduct.html"><a href="conduct.html#conduct-enforcement"><i class="fa fa-check"></i><b>B.4</b> Enforcement</a></li>
<li class="chapter" data-level="B.5" data-path="conduct.html"><a href="conduct.html#conduct-attribution"><i class="fa fa-check"></i><b>B.5</b> Attribution</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>C</b> Glossary</a></li>
<li class="chapter" data-level="D" data-path="objectives.html"><a href="objectives.html"><i class="fa fa-check"></i><b>D</b> Learning Objectives</a></li>
<li class="chapter" data-level="E" data-path="keypoints.html"><a href="keypoints.html"><i class="fa fa-check"></i><b>E</b> Key Points</a></li>
<li class="chapter" data-level="F" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i><b>F</b> Solutions</a>
<ul>
<li class="chapter" data-level="F.1" data-path="solutions.html"><a href="solutions.html#chapter-refbash-basics"><i class="fa fa-check"></i><b>F.1</b> Chapter @ref(bash-basics)</a>
<ul>
<li class="chapter" data-level="F.1.1" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-more-ls"><i class="fa fa-check"></i><b>F.1.1</b> Exercise @ref(bash-basics-ex-more-ls)</a></li>
<li class="chapter" data-level="F.1.2" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-ls-rt"><i class="fa fa-check"></i><b>F.1.2</b> Exercise @ref(bash-basics-ex-ls-rt)</a></li>
<li class="chapter" data-level="F.1.3" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-paths"><i class="fa fa-check"></i><b>F.1.3</b> Exercise @ref(bash-basics-ex-paths)</a></li>
<li class="chapter" data-level="F.1.4" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-resolve-rel-path"><i class="fa fa-check"></i><b>F.1.4</b> Exercise @ref(bash-basics-ex-resolve-rel-path)</a></li>
<li class="chapter" data-level="F.1.5" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-reading-ls"><i class="fa fa-check"></i><b>F.1.5</b> Exercise @ref(bash-basics-ex-reading-ls)</a></li>
<li class="chapter" data-level="F.1.6" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-touch"><i class="fa fa-check"></i><b>F.1.6</b> Exercise @ref(bash-basics-ex-touch)</a></li>
<li class="chapter" data-level="F.1.7" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-move-dot"><i class="fa fa-check"></i><b>F.1.7</b> Exercise @ref(bash-basics-ex-move-dot)</a></li>
<li class="chapter" data-level="F.1.8" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-renaming-files"><i class="fa fa-check"></i><b>F.1.8</b> Exercise @ref(bash-basics-ex-renaming-files)</a></li>
<li class="chapter" data-level="F.1.9" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-last-ls"><i class="fa fa-check"></i><b>F.1.9</b> Exercise @ref(bash-basics-ex-last-ls)</a></li>
<li class="chapter" data-level="F.1.10" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-safe-rm"><i class="fa fa-check"></i><b>F.1.10</b> Exercise @ref(bash-basics-ex-safe-rm)</a></li>
<li class="chapter" data-level="F.1.11" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-copy-multi"><i class="fa fa-check"></i><b>F.1.11</b> Exercise @ref(bash-basics-ex-copy-multi)</a></li>
<li class="chapter" data-level="F.1.12" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-ls-match"><i class="fa fa-check"></i><b>F.1.12</b> Exercise @ref(bash-basics-ex-ls-match)</a></li>
<li class="chapter" data-level="F.1.13" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-more-wildcards"><i class="fa fa-check"></i><b>F.1.13</b> Exercise @ref(bash-basics-ex-more-wildcards)</a></li>
<li class="chapter" data-level="F.1.14" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-organizing"><i class="fa fa-check"></i><b>F.1.14</b> Exercise @ref(bash-basics-ex-organizing)</a></li>
<li class="chapter" data-level="F.1.15" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-reproduce-structure"><i class="fa fa-check"></i><b>F.1.15</b> Exercise @ref(bash-basics-ex-reproduce-structure)</a></li>
<li class="chapter" data-level="F.1.16" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-sort-n"><i class="fa fa-check"></i><b>F.1.16</b> Exercise @ref(bash-basics-ex-sort-n)</a></li>
<li class="chapter" data-level="F.1.17" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-redirect-append"><i class="fa fa-check"></i><b>F.1.17</b> Exercise @ref(bash-basics-ex-redirect-append)</a></li>
<li class="chapter" data-level="F.1.18" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-append-data"><i class="fa fa-check"></i><b>F.1.18</b> Exercise @ref(bash-basics-ex-append-data)</a></li>
<li class="chapter" data-level="F.1.19" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-piping"><i class="fa fa-check"></i><b>F.1.19</b> Exercise @ref(bash-basics-ex-piping)</a></li>
<li class="chapter" data-level="F.1.20" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-uniq-adjacent"><i class="fa fa-check"></i><b>F.1.20</b> Exercise @ref(bash-basics-ex-uniq-adjacent)</a></li>
<li class="chapter" data-level="F.1.21" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-reading-pipes"><i class="fa fa-check"></i><b>F.1.21</b> Exercise @ref(bash-basics-ex-reading-pipes)</a></li>
<li class="chapter" data-level="F.1.22" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-pipe-construction"><i class="fa fa-check"></i><b>F.1.22</b> Exercise @ref(bash-basics-ex-pipe-construction)</a></li>
<li class="chapter" data-level="F.1.23" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-which-pipe"><i class="fa fa-check"></i><b>F.1.23</b> Exercise @ref(bash-basics-ex-which-pipe)</a></li>
<li class="chapter" data-level="F.1.24" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-wildcard-expressions"><i class="fa fa-check"></i><b>F.1.24</b> Exercise @ref(bash-basics-ex-wildcard-expressions)</a></li>
<li class="chapter" data-level="F.1.25" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-remove-unneeded"><i class="fa fa-check"></i><b>F.1.25</b> Exercise @ref(bash-basics-ex-remove-unneeded)</a></li>
<li class="chapter" data-level="F.1.26" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-loop-dry-run"><i class="fa fa-check"></i><b>F.1.26</b> Exercise @ref(bash-basics-ex-loop-dry-run)</a></li>
<li class="chapter" data-level="F.1.27" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-nested-loops"><i class="fa fa-check"></i><b>F.1.27</b> Exercise @ref(bash-basics-ex-nested-loops)</a></li>
<li class="chapter" data-level="F.1.28" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-loop-variables"><i class="fa fa-check"></i><b>F.1.28</b> Exercise @ref(bash-basics-ex-loop-variables)</a></li>
<li class="chapter" data-level="F.1.29" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-limiting-file-sets"><i class="fa fa-check"></i><b>F.1.29</b> Exercise @ref(bash-basics-ex-limiting-file-sets)</a></li>
<li class="chapter" data-level="F.1.30" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-loop-save"><i class="fa fa-check"></i><b>F.1.30</b> Exercise @ref(bash-basics-ex-loop-save)</a></li>
<li class="chapter" data-level="F.1.31" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-list-unique"><i class="fa fa-check"></i><b>F.1.31</b> Exercise @ref(bash-basics-ex-list-unique)</a></li>
<li class="chapter" data-level="F.1.32" data-path="solutions.html"><a href="solutions.html#exercise-refbash-basics-ex-history-order"><i class="fa fa-check"></i><b>F.1.32</b> Exercise @ref(bash-basics-ex-history-order)</a></li>
</ul></li>
<li class="chapter" data-level="F.2" data-path="solutions.html"><a href="solutions.html#chapter-refbash-advanced"><i class="fa fa-check"></i><b>F.2</b> Chapter @ref(bash-advanced)</a>
<ul>
<li class="chapter" data-level="F.2.1" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-script-variables"><i class="fa fa-check"></i><b>F.2.1</b> Exercise @ref(bash-advanced-ex-script-variables)</a></li>
<li class="chapter" data-level="F.2.2" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-longest-with-extension"><i class="fa fa-check"></i><b>F.2.2</b> Exercise @ref(bash-advanced-ex-longest-with-extension)</a></li>
<li class="chapter" data-level="F.2.3" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-reading-scripts"><i class="fa fa-check"></i><b>F.2.3</b> Exercise @ref(bash-advanced-ex-reading-scripts)</a></li>
<li class="chapter" data-level="F.2.4" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-using-grep"><i class="fa fa-check"></i><b>F.2.4</b> Exercise @ref(bash-advanced-ex-using-grep)</a></li>
<li class="chapter" data-level="F.2.5" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-tracking-species"><i class="fa fa-check"></i><b>F.2.5</b> Exercise @ref(bash-advanced-ex-tracking-species)</a></li>
<li class="chapter" data-level="F.2.6" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-little-women"><i class="fa fa-check"></i><b>F.2.6</b> Exercise @ref(bash-advanced-ex-little-women)</a></li>
<li class="chapter" data-level="F.2.7" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-match-subtract"><i class="fa fa-check"></i><b>F.2.7</b> Exercise @ref(bash-advanced-ex-match-subtract)</a></li>
<li class="chapter" data-level="F.2.8" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-reading-find"><i class="fa fa-check"></i><b>F.2.8</b> Exercise @ref(bash-advanced-ex-reading-find)</a></li>
<li class="chapter" data-level="F.2.9" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-find-properties"><i class="fa fa-check"></i><b>F.2.9</b> Exercise @ref(bash-advanced-ex-find-properties)</a></li>
<li class="chapter" data-level="F.2.10" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-combining-options"><i class="fa fa-check"></i><b>F.2.10</b> Exercise @ref(bash-advanced-ex-combining-options)</a></li>
<li class="chapter" data-level="F.2.11" data-path="solutions.html"><a href="solutions.html#exercise-refbash-advanced-ex-other-wildcards"><i class="fa fa-check"></i><b>F.2.11</b> Exercise @ref(bash-advanced-ex-other-wildcards)</a></li>
</ul></li>
<li class="chapter" data-level="F.3" data-path="solutions.html"><a href="solutions.html#chapter-refautomate"><i class="fa fa-check"></i><b>F.3</b> Chapter @ref(automate)</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refautomate-ex-create-summary-results"><i class="fa fa-check"></i>Exercise @ref(automate-ex-create-summary-results)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refautomate-ex-plot-top-n"><i class="fa fa-check"></i>Exercise @ref(automate-ex-plot-top-n)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refautomate-ex-mkdir"><i class="fa fa-check"></i>Exercise @ref(automate-ex-mkdir)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refautomate-ex-report-change"><i class="fa fa-check"></i>Exercise @ref(automate-ex-report-change)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refautomate-ex-readable-help"><i class="fa fa-check"></i>Exercise @ref(automate-ex-readable-help)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refautomate-ex-wildcard-perils"><i class="fa fa-check"></i>Exercise @ref(automate-ex-wildcard-perils)</a></li>
</ul></li>
<li class="chapter" data-level="F.4" data-path="solutions.html"><a href="solutions.html#chapter-refgit-cmdline"><i class="fa fa-check"></i><b>F.4</b> Chapter @ref(git-cmdline)</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-places"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-places)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-commit"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-commit)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-multiple"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-multiple)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-bio"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-bio)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-ignore-nested"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-ignore-nested)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-include"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-include)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-github-interface"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-github-interface)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-timestamp"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-timestamp)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-push-commit"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-push-commit)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-boilerplate"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-boilerplate)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-recover"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-recover)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-history"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-history)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exericse-refgit-cmdline-ex-diff"><i class="fa fa-check"></i>Exericse @ref(git-cmdline-ex-diff)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-unstage"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-unstage)</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-cmdline-ex-blame"><i class="fa fa-check"></i>Exercise @ref(git-cmdline-ex-blame)</a></li>
</ul></li>
<li class="chapter" data-level="F.5" data-path="solutions.html"><a href="solutions.html#chapter-refgit-advanced"><i class="fa fa-check"></i><b>F.5</b> Chapter @ref(git-advanced)</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#exercise-refgit-advanced-ex-additional-pr"><i class="fa fa-check"></i>Exercise @ref(git-advanced-ex-additional-pr)</a></li>
</ul></li>
<li class="chapter" data-level="F.6" data-path="solutions.html"><a href="solutions.html#chapter-refproject"><i class="fa fa-check"></i><b>F.6</b> Chapter @ref(project}</a>
<ul>
<li class="chapter" data-level="F.6.1" data-path="solutions.html"><a href="solutions.html#exercise-refproject-ex-understand-project"><i class="fa fa-check"></i><b>F.6.1</b> Exercise @ref(project-ex-understand-project)</a></li>
<li class="chapter" data-level="F.6.2" data-path="solutions.html"><a href="solutions.html#exercise-refproject-ex-permanent-links"><i class="fa fa-check"></i><b>F.6.2</b> Exercise @ref(project-ex-permanent-links)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="G" data-path="glossary.html"><a href="glossary.html#yaml"><i class="fa fa-check"></i><b>G</b> YAML</a></li>
<li class="chapter" data-level="H" data-path="ssh.html"><a href="ssh.html"><i class="fa fa-check"></i><b>H</b> Working Remotely</a>
<ul>
<li class="chapter" data-level="H.1" data-path="ssh.html"><a href="ssh.html#ssh-login"><i class="fa fa-check"></i><b>H.1</b> How can I log in to a remote computer?</a></li>
<li class="chapter" data-level="H.2" data-path="ssh.html"><a href="ssh.html#ssh-cp"><i class="fa fa-check"></i><b>H.2</b> How can I copy files to and from a remote computer?</a></li>
<li class="chapter" data-level="H.3" data-path="ssh.html"><a href="ssh.html#ssh-cmd"><i class="fa fa-check"></i><b>H.3</b> How can I run commands on a remote computer?</a></li>
<li class="chapter" data-level="H.4" data-path="ssh.html"><a href="ssh.html#ssh-keys"><i class="fa fa-check"></i><b>H.4</b> How can I create keys so that I don’t have to keep typing my password?</a></li>
<li class="chapter" data-level="H.5" data-path="ssh.html"><a href="ssh.html#ssh-filedir"><i class="fa fa-check"></i><b>H.5</b> What directories and files does SSH depend on?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Merely Useful: Using R for Research Software Engineering</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="correct" class="section level1" number="12">
<h1><span class="header-section-number">Chapter 12</span> Correctness</h1>
<p>We all hope the software we write does what we wrote it to do.
But how can we be sure?
The short is answer is that we can’t,
but that as in science,
we can test our expectations against reality to help us decide if we are sure enough.
This chapter explores ways of doing that in R.</p>
<div id="correct-manual" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> How can I test functions manually?</h2>
<p>Suppose we have written a function to get the sign of a number.
This might be:</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="correct.html#cb563-1"></a>numSign &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb563-2"><a href="correct.html#cb563-2"></a>  <span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb563-3"><a href="correct.html#cb563-3"></a>    <span class="dv">1</span></span>
<span id="cb563-4"><a href="correct.html#cb563-4"></a>  } <span class="cf">else</span> {</span>
<span id="cb563-5"><a href="correct.html#cb563-5"></a>    <span class="dv">-1</span></span>
<span id="cb563-6"><a href="correct.html#cb563-6"></a>  }</span>
<span id="cb563-7"><a href="correct.html#cb563-7"></a>}</span></code></pre></div>
<p>A simple way to test the function interactively
is to check that it produces the correct value for a few representative cases:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="correct.html#cb564-1"></a><span class="kw">numSign</span>(<span class="dv">2</span>) <span class="op">==</span><span class="st"> </span><span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="correct.html#cb566-1"></a><span class="kw">numSign</span>(<span class="dv">0</span>) <span class="op">==</span><span class="st"> </span><span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="correct.html#cb568-1"></a><span class="kw">numSign</span>(<span class="op">-</span><span class="dv">4</span>) <span class="op">==</span><span class="st"> </span><span class="dv">-1</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>These tests show that it handles (some) positive and negatives value correctly,
but gives the wrong value for zero
(whose sign should also be 0).</p>
<p>Manual testing is a good place to start,
but when we are creating or modifying a larger function,
we want to be able to re-run our tests with a single command.
That phrase “with a single command” suggests that we should write a second function
whose job is to re-run tests for the first.
In R,
this might be:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="correct.html#cb570-1"></a>test_numSign &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb570-2"><a href="correct.html#cb570-2"></a>    <span class="kw">stopifnot</span>(<span class="kw">numSign</span>(<span class="fl">0.1</span>) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb570-3"><a href="correct.html#cb570-3"></a>    <span class="kw">stopifnot</span>(<span class="kw">numSign</span>(<span class="dv">0</span>) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb570-4"><a href="correct.html#cb570-4"></a>    <span class="kw">stopifnot</span>(<span class="kw">numSign</span>(<span class="op">-</span><span class="ot">Inf</span>) <span class="op">==</span><span class="st"> </span><span class="dv">-1</span>)</span>
<span id="cb570-5"><a href="correct.html#cb570-5"></a>}</span></code></pre></div>
<p>As its name suggests,
<code>stopifnot</code> stops the program if its argument is not true.</p>
</div>
<div id="correct-features" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> What features do we want a testing framework to have?</h2>
<p>The individual tests in <code>test_numSign</code> are called [unit tests][unit-test]
because they test the smallest units of our code.
Writing functions so that we can easily re-run unit tests is a step in the right direction,
but our current approach has two flaws.
First,
if a test fails,
none of the tests that come after it run.
In this case,
for example,
we don’t know if <code>numSign</code> handles <code>-Inf</code> correctly or not
because testing stops when <code>numSign(0)</code> gives the wrong answer.
We would have more information if all of the tests ran every time.</p>
<p>The second flaw in <code>test_numSign</code> is that it doesn’t tell us anything if our tests pass.
A one-line summary saying “3/3 tests passed” would confirm that the tests actually ran,
while something like “2/3 tests passed”
followed by a list of the tests that <em>didn’t</em> so we know where to start investigating
would be even better.</p>
<blockquote>
<p><strong>Too Much Information</strong></p>
<p>We <em>don’t</em> want our testing framework to list all of the tests that pass
because if there is too much output,
we will soon start ignoring all of it.
A testing framework should only demand that we pay attention to details
when we actually need to.</p>
</blockquote>
<p>One other requirement for a good set of tests is [isolation][test-isolation].
Suppose that we have two functions <code>first</code> and <code>second</code> and we test them in this way:</p>
<pre><code>first_result = first()
check(first_result)
second_result = second(first_result)
check(second_result)</code></pre>
<p>If <code>first</code> produces a wrong answer,
we won’t know if <code>second</code> is working
because we won’t know what its actual input is.
Using the output of one test as the input of another
increases the risk of [false positives][false-positive] (tests passing when they should fail)
and [false negatives][false-negative] (tests failing when they should pass),
which distract or mislead us.</p>
<p>Putting these requirements together,
a single unit test has:</p>
<ul>
<li>a function being tested (e.g., the number 0 or a list of images);</li>
<li>an [actual result][actual-result],
which is what the code produces when given that fixture; and</li>
<li>an [expected result][expected-result]
that the actual result is compared to.</li>
</ul>
<p>Each test can have one of three results:</p>
<ul>
<li>[success][test-success]: the code passed the test.</li>
<li>[failure][test-failure]: the code didn’t pass the test.</li>
<li>[error][test-error]: something went wrong with the test itself,
so we don’t know anything for certain about the code being tested.</li>
</ul>
<p>A [test framework][test-framework] (also called a [test runner][test-runner]) should:</p>
<ul>
<li>find and run tests;</li>
<li>summarize results;</li>
<li>pinpoint the locations of failures so that users know where to start debugging;</li>
<li>encourage people to isolate tests; and</li>
<li>make it easy to write and update tests (because otherwise people won’t do it).</li>
</ul>
<p>The next two sections will introduce the most popular frameworks for R.
We will then explore general issues
such as how we can tell which parts of our code have and haven’t been tested
and what kinds of tests we should write.</p>
</div>
<div id="correct-create-r" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> Create and run unit tests</h2>
<p>The easiest way to start testing in R is via the <code>usethis</code> package.
Let’s create a new project in RStudio called <code>creater</code> of type “package”
(both because <code>usethis</code> is designed to work with packages,
and because our R projects should always be packages).
We can then type:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="correct.html#cb572-1"></a>usethis<span class="op">::</span><span class="kw">use_testthat</span>()</span></code></pre></div>
<pre class="text"><code>✔ Setting active project to &#39;/Users/merely/creater&#39;
✔ Adding &#39;testthat&#39; to Suggests field in DESCRIPTION
✔ Creating &#39;tests/testthat/&#39;
✔ Writing &#39;tests/testthat.R&#39;
● Call `use_test()` to initialize a basic test file and open it for editing.</code></pre>
<p>The call creates a new directory <code>tests/testthat/</code>,
adds <code>testthat</code> to <code>Suggests</code> in the <code>DESCRIPTION</code> file,
and creates a file called <code>tests/testthat.R</code> that tells R how to run the tests.
This may seem like a lot,
but it is all needed to create an R package (Chapter <a href="package-r.html#package-r">11</a>),
so we might as well do things that way from the start.</p>
<p>The file <code>tests/testthat.R</code> contains:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="correct.html#cb574-1"></a><span class="kw">library</span>(testthat)</span>
<span id="cb574-2"><a href="correct.html#cb574-2"></a><span class="kw">library</span>(creater)</span>
<span id="cb574-3"><a href="correct.html#cb574-3"></a></span>
<span id="cb574-4"><a href="correct.html#cb574-4"></a><span class="kw">test_check</span>(<span class="st">&quot;creater&quot;</span>)</span></code></pre></div>
<p>I.e.,
it loads the <code>testthat</code> library and our own package,
then calls <code>test_check</code> to run tests.
If we try to run our tests using:</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="correct.html#cb575-1"></a>devtools<span class="op">::</span><span class="kw">test</span>()</span></code></pre></div>
<p>we get the message:</p>
<pre class="text"><code>No tests: no files in /Users/merely/creater/tests/testthat match &#39;^test.*\.[rR]$&#39;</code></pre>
<p>This is fair,
since we haven’t yet created any tests.
To do that,
we run:</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="correct.html#cb577-1"></a>usethis<span class="op">::</span><span class="kw">use_test</span>(<span class="st">&quot;mean&quot;</span>)</span></code></pre></div>
<pre class="text"><code>✔ Increasing &#39;testthat&#39; version to &#39;&gt;= 2.1.0&#39; in DESCRIPTION
✔ Writing &#39;tests/testthat/test-mean.R&#39;
● Modify &#39;tests/testthat/test-mean.R&#39;</code></pre>
<p>As the output suggests,
this command creates a file called <code>tests/testthat/test-mean.R</code>.
We could create this file ourselves if we want;
either way,
its name should reflect what we are using it to test,
such as <code>test-read-data.R</code> or <code>test-annual-analysis.R</code>.
Note that we do <em>not</em> type the prefix <code>test-</code> in the call to <code>usethis::use_test</code>;
<code>usethis</code> will insert that automatically.</p>
<p>The newly-created file contains a single test case:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="correct.html#cb579-1"></a><span class="kw">test_that</span>(<span class="st">&quot;multiplication works&quot;</span>, {</span>
<span id="cb579-2"><a href="correct.html#cb579-2"></a>  <span class="kw">expect_equal</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb579-3"><a href="correct.html#cb579-3"></a>})</span></code></pre></div>
<p>We can run this with:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="correct.html#cb580-1"></a>devtools<span class="op">::</span><span class="kw">test</span>()</span></code></pre></div>
<pre class="text"><code>Loading creater
Testing creater
✔ |  OK F W S | Context
✔ |   1       | mean

══ Results ══════════════════════════════════════════════════════════════════════════════════════════════════════
OK:       1
Failed:   0
Warnings: 0
Skipped:  0</code></pre>
<p>or use the RStudio keyboard shortcut <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd> (on Windows)
or <kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd> (on Mac),
which calls the same function.
Either way,
R searches below the <code>tests/testthat</code> directory to find files whose names start with <code>test</code>,
loads them,
and runs the tests that it finds.
The output tells us that one test passed,
none failed,
there were no warnings,
and no tests were skipped.</p>
<p>Let’s re-open <code>tests/testthat/test-mean.R</code> and replace the test that R wrote for us
with this code:</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="correct.html#cb582-1"></a><span class="kw">context</span>(<span class="st">&quot;Computing the mean&quot;</span>)</span>
<span id="cb582-2"><a href="correct.html#cb582-2"></a></span>
<span id="cb582-3"><a href="correct.html#cb582-3"></a><span class="kw">test_that</span>(<span class="st">&quot;the mean of an odd-length vector is correct&quot;</span>, {</span>
<span id="cb582-4"><a href="correct.html#cb582-4"></a>    <span class="kw">expect_identical</span>(<span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), <span class="fl">2.0</span>)</span>
<span id="cb582-5"><a href="correct.html#cb582-5"></a>})</span>
<span id="cb582-6"><a href="correct.html#cb582-6"></a></span>
<span id="cb582-7"><a href="correct.html#cb582-7"></a><span class="kw">test_that</span>(<span class="st">&quot;the mean of an even-length vector is correct&quot;</span>, {</span>
<span id="cb582-8"><a href="correct.html#cb582-8"></a>    <span class="kw">expect_identical</span>(<span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>), <span class="fl">2.0</span>)</span>
<span id="cb582-9"><a href="correct.html#cb582-9"></a>})</span></code></pre></div>
<pre class="text"><code>Loading creater
Testing creater
✔ |  OK F W S | Context
✖ |   1 1     | Computing the mean
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────
test-mean.R:8: failure: the mean of an even-length vector is correct
mean(1:4) not identical to 2.
1/1 mismatches
[1] 2.5 - 2 == 0.5
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────

══ Results ══════════════════════════════════════════════════════════════════════════════════════════════════════
OK:       1
Failed:   1
Warnings: 0
Skipped:  0</code></pre>
<p>The little table at the top of the output shows that one test passed and one failed
in the context titled <code>"Computing the mean"</code>.
The lines below tell us what failed and why,
and the final section of the report summarizes the results.
It is redundant in this case,
since both of our tests are in the same context,
but is useful if we have several files full of tests.</p>
</div>
<div id="correct-setup" class="section level2" number="12.4">
<h2><span class="header-section-number">12.4</span> How should I set up my unit tests?</h2>
<p>TODO: This section is about fixtures. I’m not aware of “fixtures” in R, so this will need to be modified.</p>
<p>Test files all have a similar structure:</p>
<ol style="list-style-type: decimal">
<li>Load the software to be tested
(since it normally won’t be in the same file as the tests).</li>
<li>Write one short function to test each feature of the software.</li>
</ol>
<p>Each test function also has a stereotypical structure:</p>
<ol style="list-style-type: decimal">
<li>Create the test file.</li>
<li>Run the test.</li>
<li>Check the result.</li>
</ol>
<p>Creating a test file often requires many lines of code,
so we often write helper functions to do this.
For example,
if we are testing functions that work on multiple dataframes in R,
we might write a function like this:</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="correct.html#cb584-1"></a>create_three_frames &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb584-2"><a href="correct.html#cb584-2"></a>    ones &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb584-3"><a href="correct.html#cb584-3"></a>        <span class="op">~</span>odd, <span class="op">~</span>even,</span>
<span id="cb584-4"><a href="correct.html#cb584-4"></a>           <span class="dv">1</span>,     <span class="dv">2</span>,</span>
<span id="cb584-5"><a href="correct.html#cb584-5"></a>           <span class="dv">3</span>,     <span class="dv">4</span>)</span>
<span id="cb584-6"><a href="correct.html#cb584-6"></a>    tens &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb584-7"><a href="correct.html#cb584-7"></a>        <span class="op">~</span>odd, <span class="op">~</span>even,</span>
<span id="cb584-8"><a href="correct.html#cb584-8"></a>          <span class="dv">10</span>,    <span class="dv">20</span>,</span>
<span id="cb584-9"><a href="correct.html#cb584-9"></a>          <span class="dv">30</span>,    <span class="dv">40</span>)</span>
<span id="cb584-10"><a href="correct.html#cb584-10"></a>    hundreds &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb584-11"><a href="correct.html#cb584-11"></a>        <span class="op">~</span>odd, <span class="op">~</span>even,</span>
<span id="cb584-12"><a href="correct.html#cb584-12"></a>         <span class="dv">100</span>,   <span class="dv">200</span>,</span>
<span id="cb584-13"><a href="correct.html#cb584-13"></a>         <span class="dv">300</span>,   <span class="dv">400</span>)</span>
<span id="cb584-14"><a href="correct.html#cb584-14"></a>    <span class="kw">list</span>(<span class="dt">ones=</span>ones, <span class="dt">tens=</span>tens, <span class="dt">hundreds=</span>hundreds)</span>
<span id="cb584-15"><a href="correct.html#cb584-15"></a>}</span></code></pre></div>
<p>We could then use the helper (?) that function produces in many tests.
Here,
for example,
we are using it to test a function called <code>columnize</code>:</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="correct.html#cb585-1"></a><span class="kw">test_that</span>(<span class="st">&quot;columnize combines columns by name with addition&quot;</span>, {</span>
<span id="cb585-2"><a href="correct.html#cb585-2"></a>    fixture &lt;-<span class="st"> </span><span class="kw">create_three_frames</span>()</span>
<span id="cb585-3"><a href="correct.html#cb585-3"></a>    result &lt;-<span class="st"> </span><span class="kw">columnize</span>(fixture, <span class="st">&#39;+&#39;</span>, odd)</span>
<span id="cb585-4"><a href="correct.html#cb585-4"></a>    <span class="kw">expect_equal</span>(result<span class="op">$</span>odd, <span class="kw">c</span>(<span class="dv">111</span>, <span class="dv">333</span>))</span>
<span id="cb585-5"><a href="correct.html#cb585-5"></a>})</span>
<span id="cb585-6"><a href="correct.html#cb585-6"></a></span>
<span id="cb585-7"><a href="correct.html#cb585-7"></a><span class="kw">test_that</span>(<span class="st">&quot;columnize combines columns by name with multiplication&quot;</span>, {</span>
<span id="cb585-8"><a href="correct.html#cb585-8"></a>    fixture &lt;-<span class="st"> </span><span class="kw">create_three_frames</span>()</span>
<span id="cb585-9"><a href="correct.html#cb585-9"></a>    result &lt;-<span class="st"> </span><span class="kw">columnize</span>(fixture, <span class="st">&#39;*&#39;</span>, odd)</span>
<span id="cb585-10"><a href="correct.html#cb585-10"></a>    <span class="kw">expect_equal</span>(result<span class="op">$</span>odd, <span class="kw">c</span>(<span class="dv">1000</span>, <span class="dv">9000</span>))</span>
<span id="cb585-11"><a href="correct.html#cb585-11"></a>})</span></code></pre></div>
<p>Using helper functions to create fixtures like this
reduces the [cognitive load][cognitive-load] on whoever has to maintain the tests,
since they only have to form a [mental model][mental-model] of a few cases
rather than a new one for each test.
Note that we do <em>not</em> create the fixture once as a global variable
and then re-use it in many tests.
Tests should be isolated,
and having them share data increases the chances that
one of our tests will modify the data in ways that interfere with other tests.</p>
</div>
<div id="correct-check" class="section level2" number="12.5">
<h2><span class="header-section-number">12.5</span> How should I check the results of tests?</h2>
<p>Once we have a result we need to check it.</p>
<blockquote>
<p><strong>Testing in the Real World</strong></p>
<p>In practice,
most programmers would write <code>combined_tests</code> in this case
rather than doubling the amount of reading they have to do
in order to understand these tests.
The purpose of testing is always to draw attention to things that need it;
if the second check in <code>combined_tests</code> doesn’t run because the first one failed
then we will have less information than we could,
but we will still know the most important thing:
our code is broken.</p>
</blockquote>
<p>R’s <code>testthat</code> library provides multiple checking functions for different purposes.
<code>expect_identical()</code> compares that actual and expected results are identical down to the last bit.
<code>expect_equal()</code> checks that its arguments are equal within a narrow tolerance;
as we discuss in Section <a href="#correct-float"><strong>??</strong></a>,
this is more useful for most data science problems.
Others include <code>expect_length</code>,
which checks that a vector has the right length,
and <code>expect_match</code>,
which checks that a string matches a [regular expression][regular-expression].
We can always replace these with <code>expect_true</code>,
i.e.,
use:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="correct.html#cb586-1"></a><span class="kw">expect_true</span>(<span class="kw">length</span>(result <span class="op">==</span><span class="st"> </span><span class="dv">3</span>))</span></code></pre></div>
<p>instead of:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="correct.html#cb587-1"></a><span class="kw">expect_length</span>(result, <span class="dv">3</span>)</span></code></pre></div>
<p>but the latter makes our intention clearer.</p>
</div>
<div id="correct-failure" class="section level2" number="12.6">
<h2><span class="header-section-number">12.6</span> Why and how should I test that software fails correctly?</h2>
<p>Evil clowns are every programmer’s worst nightmare.
Their second worst is a [silent failure][silent-failure]:
something that goes wrong but doesn’t crash,
print a warning,
or otherwise signal that human attention is required.
Testing that our code fails when it should
is therefore just as important as testing that it runs correctly.</p>
<blockquote>
<p><strong>We Have the Data</strong></p>
<p>The need to test error handling is not just folklore:
in their study of failures in data-intensive applications,
<span class="citation">Yuan et al. (<a href="references.html#ref-Yuan2014" role="doc-biblioref">2014</a>)</span> found that,
“the majority of catastrophic failures could easily have been prevented
by performing simple testing on error handling code—the last line of defense—even without
an understanding of the software design.”</p>
</blockquote>
<p><code>testthat</code> provides specific functions to test for errors or warnings
called <code>expect_error()</code> and <code>expect_warning()</code> respectively:</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="correct.html#cb588-1"></a><span class="kw">test_that</span>(<span class="st">&quot;text must not be empty&quot;</span>, {</span>
<span id="cb588-2"><a href="correct.html#cb588-2"></a>    <span class="kw">expect_error</span>(<span class="kw">count_words</span>(<span class="st">&quot;&quot;</span>))</span>
<span id="cb588-3"><a href="correct.html#cb588-3"></a>})</span></code></pre></div>
</div>
<div id="correct-coverage" class="section level2" number="12.7">
<h2><span class="header-section-number">12.7</span> How can I tell whether my code has been tested or not?</h2>
<p>As we write more code or make changes to code we already have,
we may lose track of which parts we have tested and which we haven’t.
Even short programs,
loops or conditionals may make it difficult for us to figure out
what is actually being executed.
For example,
take a few moments to read this function in R</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="correct.html#cb589-1"></a>first &lt;-<span class="st"> </span><span class="cf">function</span>(left, right) {</span>
<span id="cb589-2"><a href="correct.html#cb589-2"></a>  <span class="cf">if</span> (left <span class="op">&lt;</span><span class="st"> </span>right) {</span>
<span id="cb589-3"><a href="correct.html#cb589-3"></a>    tmp &lt;-<span class="st"> </span>left</span>
<span id="cb589-4"><a href="correct.html#cb589-4"></a>    left &lt;-<span class="st"> </span>right</span>
<span id="cb589-5"><a href="correct.html#cb589-5"></a>    right &lt;-<span class="st"> </span>tmp</span>
<span id="cb589-6"><a href="correct.html#cb589-6"></a>  }</span>
<span id="cb589-7"><a href="correct.html#cb589-7"></a></span>
<span id="cb589-8"><a href="correct.html#cb589-8"></a>  <span class="cf">while</span> (left <span class="op">&gt;</span><span class="st"> </span>right) {</span>
<span id="cb589-9"><a href="correct.html#cb589-9"></a>    value &lt;-<span class="st"> </span><span class="kw">second</span>(left, right)</span>
<span id="cb589-10"><a href="correct.html#cb589-10"></a>    left &lt;-<span class="st"> </span>right</span>
<span id="cb589-11"><a href="correct.html#cb589-11"></a>    right &lt;-<span class="st"> </span><span class="kw">as.integer</span>(right <span class="op">/</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb589-12"><a href="correct.html#cb589-12"></a>  }</span>
<span id="cb589-13"><a href="correct.html#cb589-13"></a></span>
<span id="cb589-14"><a href="correct.html#cb589-14"></a>  value</span>
<span id="cb589-15"><a href="correct.html#cb589-15"></a>}</span>
<span id="cb589-16"><a href="correct.html#cb589-16"></a></span>
<span id="cb589-17"><a href="correct.html#cb589-17"></a>second &lt;-<span class="st"> </span><span class="cf">function</span>(check, balance) {</span>
<span id="cb589-18"><a href="correct.html#cb589-18"></a>    <span class="cf">if</span> (check <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb589-19"><a href="correct.html#cb589-19"></a>        balance</span>
<span id="cb589-20"><a href="correct.html#cb589-20"></a>    } <span class="cf">else</span> {</span>
<span id="cb589-21"><a href="correct.html#cb589-21"></a>        <span class="dv">0</span></span>
<span id="cb589-22"><a href="correct.html#cb589-22"></a>    }</span>
<span id="cb589-23"><a href="correct.html#cb589-23"></a>}</span>
<span id="cb589-24"><a href="correct.html#cb589-24"></a></span>
<span id="cb589-25"><a href="correct.html#cb589-25"></a><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="kw">first</span>(<span class="dv">3</span>, <span class="dv">5</span>))</span></code></pre></div>
<p>The only way to know which parts of these functions are and aren’t executed
is to trace their execution a line at a time.
The good news is that we don’t have to do this ourselves:
a [code coverage][code-coverage] tool will do this for us.
In essence,
a code coverage tool creates a vector of Boolean flags with one entry for each line of code,
then modifies the code so that the appropriate flag is set to <code>true</code> whenever that line is executed
(Figure <a href="correct.html#fig:correct-how-coverage-works">12.1</a>).
When the program finishes,
the tool can show us which lines were touched
and report summary statistics such as the number or percentage of lines that weren’t used.</p>
<div class="figure"><span id="fig:correct-how-coverage-works"></span>
<img src="figures/FIXME.png" alt="How Coverage Works"  />
<p class="caption">
Figure 12.1: How Coverage Works
</p>
</div>
<p>The <code>covr</code> package has several functions for checking coverage.
For example,
we can test the coverage of the tests for a package by running:</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="correct.html#cb590-1"></a>covr<span class="op">::</span><span class="kw">package_coverage</span>()</span></code></pre></div>
<p>This function outputs a list of all R files in the package
with their corresponding percentage coverage,
which is a good way to figure out what needs to be done next.</p>
</div>
<div id="correct-enough" class="section level2" number="12.8">
<h2><span class="header-section-number">12.8</span> How much testing is enough?</h2>
<p>If we are writing software for a safety-critical application such as a medical device,
we should aim for 100% code coverage,
i.e.,
every single line in the application should be tested.
In fact,
we should probably go further and aim for 100% [path coverage][path-coverage]
and ensure that every possible path through the code has been checked.</p>
<p>But most of us don’t write software that people’s lives depend on,
so requiring 100% code coverage is like asking for ten decimal places of accuracy
when checking the voltage of a household electrical outlet.
We always need to balance the effort required to create tests
against the likelihood that those tests will uncover useful information.</p>
<p>It’s important to understand that no amount of testing can prove a piece of software is completely correct.
A function with only two numeric arguments has 2<sup>128</sup> possible inputs.
Even if we could write the tests,
how could we be sure we were checking the result of each one correctly?</p>
<p>And testing data analysis pipelines is often harder than testing mainstream software applications,
since data analysts often don’t know what the right answer is.
(If we did,
we would have submitted our report and moved on to the next problem already.)
The key distinction is the difference between [validation][validation],
which asks whether the specification is correct,
while [verification][verification],
which asks whether we have met that specification.
The difference between them is the difference between building the right thing and building something right,
and the former question is often hard for data scientists to answer.</p>
<p>Luckily,
we can group the test cases for most functions into classes.
For example,
it might be possible to test a function that takes numbers as inputs
as well as we need to
using only a few cases:
zero, a positive number, a negative one, and infinity.
If we want to go further,
we could check that it fails the right way when given a string or a list.
Similarly,
when testing a function that summarizes a table full of data,
we should probably check that it handles tables with:</p>
<ul>
<li>no rows</li>
<li>only one row</li>
<li>many identical rows</li>
<li>rows having keys that are supposed to be unique, but aren’t</li>
<li>rows that contain nothing but missing values</li>
</ul>
<p>Some projects develop [checklists][checklist] to remind programmers what they ought to test.
These checklists can be a bit daunting for newcomers,
but they are a great way to pass on hard-earned experience.</p>
</div>
<div id="correct-tdd" class="section level2" number="12.9">
<h2><span class="header-section-number">12.9</span> When should I write my tests?</h2>
<p>Many programmers are passionate advocates of a practice called
[test-driven development][tdd] (TDD).
Rather than writing code and then writing tests,
they write the tests first and then write just enough code to make those tests pass.
Once the code is working,
they clean it up (Chapter <a href="glossary.html#refactor"><strong>??</strong></a>) and then move on to the next task.</p>
<p>TDD’s advocates claim that working this way leads to better code in less time because:</p>
<ol style="list-style-type: decimal">
<li><p>Writing tests clarifies what the code is actually supposed to do.</p></li>
<li><p>It eliminates [confirmation bias][confirmation-bias].
If someone has just written a function,
they are predisposed to want it to be right,
so they will bias their tests towards proving that it is correct
instead of trying to uncover errors.</p></li>
<li><p>Writing tests first ensures that they actually get written.</p></li>
</ol>
<p>These arguments are plausible.
However,
studies such as <span class="citation">Fucci et al. (<a href="references.html#ref-Fucc2016" role="doc-biblioref">2016</a>)</span> don’t support them:
in practice,
writing tests first or last doesn’t appear to affect productivity.
What <em>does</em> have an impact is working in small, interleaved increments,
i.e.,
writing just a few lines of code and testing it before moving on
rather than writing several pages of code and then spending hours on testing.</p>
<p>So how do most data scientists figure out if their software is doing the right thing?
The answer is spot checks:
each time they produce an intermediate or final result,
they scan a table, create a chart, or inspect some summary statistics
to see if everything looks OK.
Their heuristics are usually easy to state,
like “there shouldn’t be NAs at this point” or “the age range should be reasonable”,
but applying those heuristics to a particular analysis always depends on
their evolving insight into the data in question.</p>
<p>By analogy with test-driven development,
we could call this process [checking-driven development][cdd] (CDD).
Each time we add a step to our pipeline and look at its output,
we can also add a check of some kind to the pipeline to ensure that
what we are checking for remains true as the pipeline evolves or is run on other data.
This helps reusability—it’s amazing how often a one-off analysis
winds up being used many times—but the real goal is comprehensibility.
If someone can get our code and data,
run the former on the latter,
and get the same result that we did,
then our computation is reproducible,
but that doesn’t mean they can understand it.
Comments help
(either in the code or as blocks of prose in a [computational notebook][computational-notebook]),
but they won’t check that assumptions and invariants hold.
And unlike comments,
runnable assertions can’t fall out of step with what the code is actually doing…</p>
<p>We also need to distinguish between testing during development
and testing in production.
During development,
our main concern is whether our answers are (close enough to) what we expect.
We do this by analyzing small datasets
and convincing ourselves that we’re getting the right answer in some ad hoc way.</p>
<p>In production,
on the other hand,
our goal is to detect cases where behavior deviates significantly from what we previously decided what right.
We want this to be automated
so that our pipeline will ring an alarm bell to tell us something is wrong
even if we’re busy working on something else.
This can happen because real data will never have exactly the same characteristics as the data we used during development.
We also need these checks because the pipeline’s environment can change:
for example,
someone could upgrade a library that one of our libraries depends on,
which could lead to us getting slightly different answers than we expected.</p>
</div>
<div id="correct-numeric" class="section level2" number="12.10">
<h2><span class="header-section-number">12.10</span> How should I write tests that involved floating-point values?</h2>
<p>The absolute spacing between the values we can represent in Figure <a href="#fig:verify-spacing"><strong>??</strong></a> is uneven.
However,
the relative spacing between each set of values stays the same:
the first group is separated by 1,
then the separation becomes 2,
then 4,
and then 8.
This happens because we’re multiplying the same fixed set of mantissas by ever-larger exponents,
and it leads to some useful definitions.
The [absolute error][absolute-error] in an approximation is the absolute value of
the difference between the approximation and the actual value.
The [relative error][relative-error] is the ratio of the absolute error to the value we’re approximating.
For example,
it we are off by 1 in approximating 8+1 and 56+1,
we have the same absolute error,
but the relative error is larger in the first case than in the second.</p>
<p>Relative error is almost always more important than absolute error when we are testing software
because it makes little sense to say that we’re off by a hundredth
when the value in question is a billionth.
[Accuracy][accuracy] is how close our answer is to right,
and [precision][precision] is how close repeated measurements are to each other.
We can be precise without being accurate (systematic bias),
or accurate without being precise (near the right answer but without many significant digits).</p>
<p>Accuracy is usually more important than precision for human decision making:
a relative error of 10<sup>-2</sup> (two decimal places) is good enough for most data science
because the decision a human being would make won’t change if the number changes by 1%.</p>
<p>We now come to the crux of this lesson:
if the function we are testing uses floating point numbers,
what should we compare its result to?
If we compared the sum of the first few numbers in <code>vals</code> to the “right” answer,
the answer could be <code>False</code> even though we’re doing nothing wrong.
If we compared it to a previously calculated result that we had stored somehow,
the match would be exact.</p>
<p>No one has a good generic answer to this problem
because its root cause is that we’re using approximations,
and each approximation has to be judged in context.
So what can you do to test your programs?
If you are comparing to a saved result,
and the result was saved at full precision,
you could use exact equality,
because there is no reason for the new number to differ.
However,
any change to your code,
however small,
could trigger a report of a difference.
Experience shows that these spurious warnings quickly lead developers to stop paying attention to their tests.</p>
<p>A much better approach is to write a test that checks whether numbers are the same within some [tolerance][tolerance],
which is best expressed as a relative error.
R’s <code>expect_equal</code> does this automatically.</p>
</div>
<div id="correct-plots" class="section level2" number="12.11">
<h2><span class="header-section-number">12.11</span> How can I test plots and other graphical results?</h2>
<p>Testing visualizations is hard:
any change to the dimension of the plot,
however small,
can change many pixels in a [raster image][raster-image],
and cosmetic changes such as moving the legend up a couple of pixels
will similarly cause false positives.</p>
<p>The simplest solution is therefore to test the data used to produce the image
rather than the image itself.
Unless we suspect that the plotting library contains bugs,
the correct data should alwyas produce the correct plot.</p>
<p>If we <em>do</em> need to test the generated image,
the only practical approach is to compare it to a saved image that we have visually verified.
As with choosing tolerances for floating-point tests,
our rule for picking thresholds should be,
“If images are close enough that a human being would make the same decision about meaning,
the test should pass”</p>
<p>Another approach is to save the plot in a [vector format][vector-image] like [SVG][svg]
that stores the coordinates of lines and other elements as text.
We can then check that the right elements are there with the right properties.
However,
this is usually unrewarding:
again,
small changes to the library or to plotting parameters can make all of the tests fail
by moving elements by a pixel or two.
Vector-based tests therefore still need to have thresholds on floating-point values.</p>
<p>TODO: Include R example/package for this.</p>
</div>
<div id="correct-data" class="section level2" number="12.12">
<h2><span class="header-section-number">12.12</span> What data should I use to test my analyses?</h2>
<p>There aren’t any useful general rules for testing the calculations that our pipelines do,
since those calculations vary from one pipeline to the next,
but there <em>are</em> some rules about where to get data to test with.
The first method is [subsampling][subsampling]:
choose random subsets of your data,
analyze it,
and see how close the output is to what you get with the full dataset.
If the output doesn’t converge as the sample size grows,
something is probably unstable in either the algorithm or its implementation.</p>
<p>When we are subsampling,
it’s vital that we select a truly random subset of data
rather than (for example) the first N records or every N’th record.
If there is any ordering or grouping in our data,
those techniques can produce samples that are biased,
which may in turn invalidate some of your tests.</p>
<p>The other approach is to test with [synthetic data][synthetic-data].
A few lines of code can generate uniform data (i.e., data having the same values for all observations),
strongly bimodal data (which is handy for testing clustering algorithms),
or a pseudorandom sample with a known distribution.
If we do this,
we should also give our pipeline data that <em>doesn’t</em> fit your expected distribution
and make sure that something, somewhere, complains.
Doing this is the data science equivalent of testing the fire alarm every once in a while.</p>
<p>For example,
we can write a short program to generate data that conforms to Zips’ Law and use it to test our analysis.
Real data will be integers,
since words only occur or not,
and distributions will be fractional.
After a bit of experimentation,
we will use 5% relative error as our threshold for correctness:
1% excludes a valid correct case.</p>
</div>
<div id="correct-random" class="section level2" number="12.13">
<h2><span class="header-section-number">12.13</span> How can I test a program that uses random numbers?</h2>
<p>FIXME: explain how to test in the presence of random values</p>
</div>
<div id="correct-production" class="section level2" number="12.14">
<h2><span class="header-section-number">12.14</span> How can I test a data analysis pipeline in production?</h2>
<p>An [operational test][operational-test] is one that is kept in place during production
to tell users if everything is still working as it should.
Some common operational tests include:</p>
<ul>
<li>Does this pipeline stage produce the same number of output records as input records?</li>
<li>Or fewer if the stage is aggregating?</li>
<li>If two or more tables are being [joined][join],
is the number of output records equal to the product of the number of input records?</li>
<li>Is the standard deviation smaller than the range of the data?</li>
<li>Are there any NaNs or NULLs where there aren’t supposed to be?</li>
</ul>
<p>A common pattern for such tests is to have every tool append information to a [log file][log-file]
and then have another tool check that log file after the run is over.
Logging while calculating and checking afterward makes it easy to compare values between pipeline stages,
and ensures that there’s a record of why a problem was reported.</p>
<blockquote>
<p><strong>Validating Pipelines</strong></p>
<p>There are several libraries for validating data pipelines in R,
including [assertr][assertr],
[checkr][checkr],
and [validate][validate-r].</p>
</blockquote>
</div>
<div id="correct-infer" class="section level2" number="12.15">
<h2><span class="header-section-number">12.15</span> How can I infer and check properties of my data?</h2>
<p>Writing tests for the properties of data can be tedious,
but some of the work can be automated.</p>
</div>
<div id="correct-summary" class="section level2" number="12.16">
<h2><span class="header-section-number">12.16</span> Summary</h2>
<div class="figure"><span id="fig:correct-concept"></span>
<img src="figures/FIXME.png" alt="Correctness Concept Map"  />
<p class="caption">
Figure 12.2: Correctness Concept Map
</p>
</div>
</div>
<div id="correct-exercises" class="section level2" number="12.17">
<h2><span class="header-section-number">12.17</span> Exercises</h2>
<div id="correct-ex-numsign" class="section level3" number="12.17.1">
<h3><span class="header-section-number">12.17.1</span> Fixing <code>numSign</code></h3>
<ol style="list-style-type: decimal">
<li>Fix the implementation of <code>numSign</code> in either R so that all tests will succeed.</li>
<li>Re-run the tests to confirm that the function is working.</li>
<li>Extend the function so that it does something sensible when passed a string or an empty list.
Write functions to check your changes.</li>
</ol>
</div>
<div id="correct-ex-simple-calc" class="section level3" number="12.17.2">
<h3><span class="header-section-number">12.17.2</span> Checking simple calculations</h3>
<p>Create a new test by running <code>usethis::use_test("simple-arithmetic")</code>.
Copy the code below into the newly created test file and fill in the blanks
so that it runs correctly.</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="correct.html#cb591-1"></a><span class="kw">context</span>(<span class="st">&quot;Check simple calculations&quot;</span>)</span>
<span id="cb591-2"><a href="correct.html#cb591-2"></a></span>
<span id="cb591-3"><a href="correct.html#cb591-3"></a><span class="kw">test_that</span>(<span class="st">&quot;plus and minus give correct outputs&quot;</span>, {</span>
<span id="cb591-4"><a href="correct.html#cb591-4"></a>  <span class="kw">expect_identical</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb591-5"><a href="correct.html#cb591-5"></a>  <span class="kw">___</span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">-1</span>)</span>
<span id="cb591-6"><a href="correct.html#cb591-6"></a>  <span class="kw">expect_identical</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="ot">NA</span>, __)</span>
<span id="cb591-7"><a href="correct.html#cb591-7"></a>  <span class="kw">expect_identical</span>(___ <span class="op">-</span><span class="st"> </span>___, <span class="ot">NA</span>)</span>
<span id="cb591-8"><a href="correct.html#cb591-8"></a>})</span></code></pre></div>
</div>
<div id="correct-ex-purpose" class="section level3" number="12.17.3">
<h3><span class="header-section-number">12.17.3</span> Explain the purpose of tests</h3>
<p>Based on the contents of the tests below,
replace the blanks with appropriate <code>context()</code> and <code>test_that()</code> messages.</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="correct.html#cb592-1"></a><span class="kw">context</span>(<span class="st">&quot;___&quot;</span>)</span>
<span id="cb592-2"><a href="correct.html#cb592-2"></a></span>
<span id="cb592-3"><a href="correct.html#cb592-3"></a><span class="kw">test_that</span>(<span class="st">&quot;___&quot;</span>, {</span>
<span id="cb592-4"><a href="correct.html#cb592-4"></a>  <span class="kw">expect_identical</span>(<span class="kw">sum</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)), <span class="dv">3</span>)</span>
<span id="cb592-5"><a href="correct.html#cb592-5"></a>  <span class="kw">expect_identical</span>(<span class="kw">sum</span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">2</span>)), <span class="ot">NA</span>)</span>
<span id="cb592-6"><a href="correct.html#cb592-6"></a>})</span>
<span id="cb592-7"><a href="correct.html#cb592-7"></a></span>
<span id="cb592-8"><a href="correct.html#cb592-8"></a><span class="kw">test_that</span>(<span class="st">&quot;___&quot;</span>, {</span>
<span id="cb592-9"><a href="correct.html#cb592-9"></a>  <span class="kw">expect_identical</span>(<span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)), <span class="fl">1.5</span>)</span>
<span id="cb592-10"><a href="correct.html#cb592-10"></a>  <span class="kw">expect_identical</span>(<span class="kw">mean</span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">2</span>)), <span class="ot">NA</span>)</span>
<span id="cb592-11"><a href="correct.html#cb592-11"></a>})</span></code></pre></div>
</div>
<div id="correct-ex-count-words" class="section level3" number="12.17.4">
<h3><span class="header-section-number">12.17.4</span> Testing <code>count_words</code></h3>
<ol style="list-style-type: decimal">
<li>Create a new test file.</li>
<li>Write unit tests for <code>count_words</code> to check the following:
<ul>
<li>Returns zero when given an empty string.</li>
<li>Returns <code>NA</code> when given <code>NA</code>.</li>
<li>Returns 2 when given two words separated by a space.</li>
<li>Returns 2 when given two words separated by a dash <code>-</code>.</li>
</ul></li>
</ol>
</div>
<div id="correct-ex-check-errors" class="section level3" number="12.17.5">
<h3><span class="header-section-number">12.17.5</span> Checking for errors</h3>
<p>Add new unit tests for the word-counting function
to check that it raises errors when it should.</p>
</div>
</div>
<div id="correct-keypoints" class="section level2" number="12.18">
<h2><span class="header-section-number">12.18</span> Key Points</h2>
<ul>
<li>The purpose of testing is to convince people (including yourself) that software is correct enough
and to make tolerances on ‘enough’ explicit.</li>
<li>Add assertions to your code so that it checks itself as it runs.</li>
<li>Write unit tests to check small “units” or pieces of your code.</li>
<li>Write integration tests to check that multiple units work correctly together.</li>
<li>Write regression tests to check if your code is behaving differently than before.</li>
<li>A test framework finds and runs tests written in a prescribed fashion and reports their results.</li>
<li>Test coverage refers to how many lines of code are executed by a test suite.</li>
<li>Continuous integration re-builds and/or re-tests software every time something changes.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="package-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="publish.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/merely-useful/r-rse/edit/master/correct.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
